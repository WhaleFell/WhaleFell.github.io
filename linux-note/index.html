<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="renderer" content="webkit"><meta name="force-rendering" content="webkit"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta name="HandheldFriendly" content="True"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><link rel="shortcut icon" href="/images/favicon.ico"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.ico"><link rel="mask-icon" href="/images/favicon.ico"><title>Linux è¿ç»´ç¬”è®°(æŒç»­æ›´æ–°) | ğŸ˜Šè½è½ã®BlogğŸ˜Š</title><meta name="keywords" content="Linux, ç¼–ç¨‹,åšå®¢,è®°å½•,æŠ€æœ¯,ç”Ÿæ´»,å‰ç«¯,æ‘„å½±,LGBT,è®¡ç®—æœº,ç½‘ç»œå®‰å…¨,Life,Cybersecurity,Python,Golang,Vue,Javascript,Java,Linux"><meta name="description" content="Linux Operation Noteâ€‹â€‹ åˆ†åŒºç®¡ç†å’Œæ“ä½œ (Partition)ä½¿ç”¨ cfdisk ä»£æ›¿ fdisk å®ç°å¯è§†åŒ–çš„ç¡¬ç›˜åˆ†åŒº. æœ‰ GUI ç¯å¢ƒå¯ä»¥ä½¿ç”¨ gparted. apt-get install cfdisk  åˆ†é…æ‰©å±•çš„ç©ºé—´å¯ä»¥ä½¿ç”¨ resize2fs å‘½ä»¤. resize2fs &#x2F;dev&#x2F;sda1  æ‰©å±•è™šæ‹Ÿæœºç¡¬ç›˜å¤§å°æ˜¯, è®°å¾—è¦ä¿®æ”¹ swap(äº¤æ¢åˆ†åŒº) çš„ UUI"><meta property="og:type" content="article"><meta property="og:title" content="Linux è¿ç»´ç¬”è®°(æŒç»­æ›´æ–°)"><meta property="og:url" content="https://www.whaleluo.top/linux-note/index.html"><meta property="og:site_name" content="ğŸ˜Šè½è½ã®BlogğŸ˜Š"><meta property="og:description" content="Linux Operation Noteâ€‹â€‹ åˆ†åŒºç®¡ç†å’Œæ“ä½œ (Partition)ä½¿ç”¨ cfdisk ä»£æ›¿ fdisk å®ç°å¯è§†åŒ–çš„ç¡¬ç›˜åˆ†åŒº. æœ‰ GUI ç¯å¢ƒå¯ä»¥ä½¿ç”¨ gparted. apt-get install cfdisk  åˆ†é…æ‰©å±•çš„ç©ºé—´å¯ä»¥ä½¿ç”¨ resize2fs å‘½ä»¤. resize2fs &#x2F;dev&#x2F;sda1  æ‰©å±•è™šæ‹Ÿæœºç¡¬ç›˜å¤§å°æ˜¯, è®°å¾—è¦ä¿®æ”¹ swap(äº¤æ¢åˆ†åŒº) çš„ UUI"><meta property="og:locale"><meta property="og:image" content="https://api.whaleluo.top/onedrive/file/?path=/picstorage/blog/img/Linux-Operation-Note-Banner.png"><meta property="article:published_time" content="2022-03-20T08:37:48.000Z"><meta property="article:modified_time" content="2022-03-20T08:37:48.000Z"><meta property="article:author" content="WhaleFall"><meta property="article:tag" content="Linux"><meta name="twitter:card" content="images&#x2F;favicon.ico"><meta name="twitter:image" content="https://api.whaleluo.top/onedrive/file/?path=/picstorage/blog/img/Linux-Operation-Note-Banner.png"><link rel="stylesheet" href="/css/style/main.css"><link rel="stylesheet" id="hl-default-theme" href="https://api.whaleluo.top/file/?url=https://cdn.jsdelivr.net/npm/highlight.js@10.1.2/styles/atom-one-light.css" media="none"><link rel="stylesheet" id="hl-dark-theme" href="https://api.whaleluo.top/file/?url=https://cdn.jsdelivr.net/npm/highlight.js@10.1.2/styles/atom-one-dark.css" media="none"><link rel="stylesheet" href="/css/style/dark.css"><script src="/js/darkmode.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><meta name="google-site-verification" content="bka9Mdyvo7g1v-jQq8CzqcaY9zE2QGltMwsvO63rAUw"><meta name="generator" content="Hexo 7.1.1"><link rel="alternate" href="/atom.xml" title="ğŸ˜Šè½è½ã®BlogğŸ˜Š" type="application/atom+xml"></head><body><div id="app" tabindex="-1"><header class="header"><div class="header__left"><a href="/" class="button"><span class="logo__text">è½è½ã®Blog</span></a></div><div class="header__right"><div class="navbar__menus"><a href="/" class="navbar-menu button">é¦–é¡µ</a> <a href="/tags/" class="navbar-menu button">æ ‡ç­¾</a> <a href="/archives/" class="navbar-menu button">å½’æ¡£</a> <a href="/categories/" class="navbar-menu button">ä¸»é¢˜</a> <a href="/friends/" class="navbar-menu button">å‹é“¾</a> <a href="/about/" class="navbar-menu button">å…³äº</a> <a href="/event/" class="navbar-menu button">å¤§äº‹è®°</a> <a href="/atom.xml" class="navbar-menu button">RSS</a></div><a href="/search/" id="btn-search"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" width="24" height="24" fill="currentColor" stroke="currentColor" stroke-width="32"><path d="M192 448c0-141.152 114.848-256 256-256s256 114.848 256 256-114.848 256-256 256-256-114.848-256-256z m710.624 409.376l-206.88-206.88A318.784 318.784 0 0 0 768 448c0-176.736-143.264-320-320-320S128 271.264 128 448s143.264 320 320 320a318.784 318.784 0 0 0 202.496-72.256l206.88 206.88 45.248-45.248z"></path></svg> </a><a href="javaScript:void(0);" id="btn-toggle-dark"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg> </a><a class="dropdown-icon button" id="btn-dropdown" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="24" height="24" fill="none" stroke="currentColor" stroke-width="0.7" stroke-linecap="round" stroke-linejoin="round"><path fill="currentColor" d="M3.314,4.8h13.372c0.41,0,0.743-0.333,0.743-0.743c0-0.41-0.333-0.743-0.743-0.743H3.314c-0.41,0-0.743,0.333-0.743,0.743C2.571,4.467,2.904,4.8,3.314,4.8z M16.686,15.2H3.314c-0.41,0-0.743,0.333-0.743,0.743s0.333,0.743,0.743,0.743h13.372c0.41,0,0.743-0.333,0.743-0.743S17.096,15.2,16.686,15.2z M16.686,9.257H3.314c-0.41,0-0.743,0.333-0.743,0.743s0.333,0.743,0.743,0.743h13.372c0.41,0,0.743-0.333,0.743-0.743S17.096,9.257,16.686,9.257z"></path></svg></a><div class="dropdown-menus" id="dropdown-menus"><a href="/" class="dropdown-menu button">é¦–é¡µ</a> <a href="/tags/" class="dropdown-menu button">æ ‡ç­¾</a> <a href="/archives/" class="dropdown-menu button">å½’æ¡£</a> <a href="/categories/" class="dropdown-menu button">ä¸»é¢˜</a> <a href="/friends/" class="dropdown-menu button">å‹é“¾</a> <a href="/about/" class="dropdown-menu button">å…³äº</a> <a href="/event/" class="dropdown-menu button">å¤§äº‹è®°</a> <a href="/atom.xml" class="dropdown-menu button">RSS</a></div></div></header><main class="main"><div class="post-title"><h1 class="post-title__text">Linux è¿ç»´ç¬”è®°(æŒç»­æ›´æ–°)</h1><div class="post-title__meta"><a href="/archives/2022/03/" class="post-meta__date button">2022-03-20</a> <span class="separate-dot"></span><a href="/categories/Linux/" class="button">Linux</a> <span id="busuanzi_container_page_pv" hidden><span class="separate-dot"></span> <span></span> <span id="busuanzi_value_page_pv"></span> <span>Views</span></span></div></div><aside class="post-side"><div class="post-side__toc"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E5%8C%BA%E7%AE%A1%E7%90%86%E5%92%8C%E6%93%8D%E4%BD%9C-Partition"><span class="toc-number">1.</span> <span class="toc-text">åˆ†åŒºç®¡ç†å’Œæ“ä½œ (Partition)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A1%AC%E7%9B%98%E6%93%8D%E4%BD%9C-Disk-Operation"><span class="toc-number">2.</span> <span class="toc-text">ç¡¬ç›˜æ“ä½œ (Disk Operation)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%BC%E5%BC%8F%E5%8C%96%E7%A1%AC%E7%9B%98%E4%B8%BA-ETX4-%E6%A0%BC%E5%BC%8F"><span class="toc-number">2.1.</span> <span class="toc-text">æ ¼å¼åŒ–ç¡¬ç›˜ä¸º ETX4 æ ¼å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E7%A1%AC%E7%9B%98%E5%BC%80%E6%9C%BA%E6%8C%82%E8%BD%BD"><span class="toc-number">2.2.</span> <span class="toc-text">è®¾ç½®ç¡¬ç›˜å¼€æœºæŒ‚è½½</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%87%E4%BB%BD%E4%B8%8E%E7%9B%AE%E5%BD%95%E8%BF%81%E7%A7%BB"><span class="toc-number">2.3.</span> <span class="toc-text">å¤‡ä»½ä¸ç›®å½•è¿ç§»</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-tar-gz"><span class="toc-number">2.3.1.</span> <span class="toc-text">ä½¿ç”¨ tar.gz</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HDParm-%E7%A1%AC%E7%9B%98%E4%BC%91%E7%9C%A0"><span class="toc-number">2.4.</span> <span class="toc-text">HDParm ç¡¬ç›˜ä¼‘çœ </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A1%AC%E7%9B%98%E8%87%AA%E5%8A%A8%E6%8C%82%E8%BD%BD"><span class="toc-number">2.5.</span> <span class="toc-text">ç¡¬ç›˜è‡ªåŠ¨æŒ‚è½½</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E7%A1%AC%E7%9B%98%E8%AF%BB%E5%86%99"><span class="toc-number">2.6.</span> <span class="toc-text">æµ‹è¯•ç¡¬ç›˜è¯»å†™</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%AE%9E%E6%97%B6%E7%A1%AC%E7%9B%98%E9%80%9F%E7%8E%87"><span class="toc-number">2.7.</span> <span class="toc-text">æŸ¥çœ‹å®æ—¶ç¡¬ç›˜é€Ÿç‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SMB-%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB"><span class="toc-number">2.8.</span> <span class="toc-text">SMB æ–‡ä»¶å…±äº«</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E7%9B%B8%E5%85%B3"><span class="toc-number">3.</span> <span class="toc-text">è¿›ç¨‹ç›¸å…³</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E5%8A%A8%E6%9F%90%E4%B8%AA%E8%84%9A%E6%9C%AC"><span class="toc-number">3.1.</span> <span class="toc-text">å¼€æœºè‡ªå¯åŠ¨æŸä¸ªè„šæœ¬</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E7%9B%B8%E5%85%B3"><span class="toc-number">4.</span> <span class="toc-text">ç½‘ç»œç›¸å…³</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ApacheBench-AB-%E6%8E%A5%E5%8F%A3-QPS-TPS-%E6%B5%8B%E8%AF%95"><span class="toc-number">4.1.</span> <span class="toc-text">ApacheBench AB æ¥å£ QPS&#x2F;TPS æµ‹è¯•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#OpenVPN"><span class="toc-number">4.2.</span> <span class="toc-text">OpenVPN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%B5%8B%E9%80%9F"><span class="toc-number">4.3.</span> <span class="toc-text">å‘½ä»¤è¡Œæµ‹é€Ÿ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%AE%9E%E6%97%B6%E7%BD%91%E5%8D%A1%E6%B5%81%E9%87%8F"><span class="toc-number">4.4.</span> <span class="toc-text">æŸ¥çœ‹å®æ—¶ç½‘å¡æµé‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#iperf3-%E7%82%B9%E5%AF%B9%E7%82%B9%E7%BD%91%E7%BB%9C%E6%B5%8B%E9%80%9F-%E5%86%85%E7%BD%91"><span class="toc-number">4.5.</span> <span class="toc-text">iperf3 ç‚¹å¯¹ç‚¹ç½‘ç»œæµ‹é€Ÿ (å†…ç½‘)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E9%80%9F%E7%BD%91%E7%AB%99"><span class="toc-number">4.6.</span> <span class="toc-text">æµ‹é€Ÿç½‘ç«™</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E7%9B%91%E5%90%AC%E7%9A%84%E7%AB%AF%E5%8F%A3-view-listening-ports"><span class="toc-number">4.7.</span> <span class="toc-text">æŸ¥çœ‹ç›‘å¬çš„ç«¯å£ view listening ports</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FRP"><span class="toc-number">4.8.</span> <span class="toc-text">FRP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E7%AB%AF%E9%85%8D%E7%BD%AE"><span class="toc-number">4.8.1.</span> <span class="toc-text">æœåŠ¡ç«¯é…ç½®</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="toc-number">4.8.2.</span> <span class="toc-text">å®¢æˆ·ç«¯</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%90%86-configure-proxy"><span class="toc-number">4.9.</span> <span class="toc-text">é…ç½®ä»£ç† configure proxy</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Shell-%E7%9B%B8%E5%85%B3"><span class="toc-number">5.</span> <span class="toc-text">Shell ç›¸å…³</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SSH-%E9%93%BE%E6%8E%A5%E8%B6%85%E6%97%B6%E8%AE%BE%E7%BD%AE"><span class="toc-number">5.1.</span> <span class="toc-text">SSH é“¾æ¥è¶…æ—¶è®¾ç½®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SSH-%E9%85%8D%E7%BD%AE%E5%AF%86%E9%92%A5%E7%99%BB%E9%99%86"><span class="toc-number">5.2.</span> <span class="toc-text">SSH é…ç½®å¯†é’¥ç™»é™†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B8%85%E9%99%A4-ssh-%E6%89%80%E6%9C%89%E7%99%BB%E5%BD%95%E6%97%A5%E5%BF%97"><span class="toc-number">5.3.</span> <span class="toc-text">æ¸…é™¤ ssh æ‰€æœ‰ç™»å½•æ—¥å¿—</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ZSH-%E7%BB%88%E7%AB%AF%E7%BE%8E%E5%8C%96"><span class="toc-number">5.4.</span> <span class="toc-text">ZSH ç»ˆç«¯ç¾åŒ–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SSH-%E8%AE%BE%E7%BD%AE%E5%AF%86%E9%92%A5%E7%99%BB%E9%99%86%E5%B9%B6%E6%B7%BB%E5%8A%A0-hacker-account"><span class="toc-number">5.5.</span> <span class="toc-text">SSH è®¾ç½®å¯†é’¥ç™»é™†å¹¶æ·»åŠ  hacker account</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-SCP-secure-copy-%E5%91%BD%E4%BB%A4%E4%BC%A0%E8%BE%93%E6%96%87%E4%BB%B6"><span class="toc-number">5.6.</span> <span class="toc-text">ä½¿ç”¨ SCP(secure copy) å‘½ä»¤ä¼ è¾“æ–‡ä»¶</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Docker"><span class="toc-number">6.</span> <span class="toc-text">Docker</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-number">6.1.</span> <span class="toc-text">å®‰è£…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Useful-Command"><span class="toc-number">6.2.</span> <span class="toc-text">Useful Command</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%80%E5%90%AF-IPV6"><span class="toc-number">6.3.</span> <span class="toc-text">å¼€å¯ IPV6</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B8%85%E9%99%A4-docker-build-cache"><span class="toc-number">6.4.</span> <span class="toc-text">æ¸…é™¤ docker build cache</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Image-%E5%90%84%E7%A7%8D%E9%95%9C%E5%83%8F"><span class="toc-number">6.5.</span> <span class="toc-text">Image å„ç§é•œåƒ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Portainer-%E7%AE%A1%E7%90%86-UI"><span class="toc-number">6.5.1.</span> <span class="toc-text">Portainer ç®¡ç† UI</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Frps-%E6%9C%8D%E5%8A%A1%E7%AB%AF"><span class="toc-number">6.5.2.</span> <span class="toc-text">Frps æœåŠ¡ç«¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Frpc-%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="toc-number">6.5.3.</span> <span class="toc-text">Frpc å®¢æˆ·ç«¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E7%BD%91%E9%80%9F%E6%B5%8B%E8%AF%95"><span class="toc-number">6.5.4.</span> <span class="toc-text">åˆ°æœåŠ¡å™¨çš„ç½‘é€Ÿæµ‹è¯•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#FileBrowser-%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86"><span class="toc-number">6.5.5.</span> <span class="toc-text">FileBrowser æ–‡ä»¶ç®¡ç†</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#NFS-%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB"><span class="toc-number">6.5.6.</span> <span class="toc-text">NFS æ–‡ä»¶å…±äº«</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DDNS-GO"><span class="toc-number">6.5.7.</span> <span class="toc-text">DDNS-GO</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AdGuardHome-DNS"><span class="toc-number">6.5.8.</span> <span class="toc-text">AdGuardHome DNS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SmartDNS"><span class="toc-number">6.5.9.</span> <span class="toc-text">SmartDNS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#QBittorent-%E7%A7%8D%E5%AD%90%E4%B8%8B%E8%BD%BD"><span class="toc-number">6.5.10.</span> <span class="toc-text">QBittorent ç§å­ä¸‹è½½</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Alist"><span class="toc-number">6.5.11.</span> <span class="toc-text">Alist</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Homarr-%E5%AF%BC%E8%88%AA%E9%A1%B5"><span class="toc-number">6.5.12.</span> <span class="toc-text">Homarr å¯¼èˆªé¡µ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Aria2-%E4%B8%8B%E8%BD%BD"><span class="toc-number">6.5.13.</span> <span class="toc-text">Aria2 ä¸‹è½½</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Mariadb-%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">6.5.14.</span> <span class="toc-text">Mariadb æ•°æ®åº“</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#V2ray-Xray-Server"><span class="toc-number">7.</span> <span class="toc-text">V2ray &#x2F; Xray Server</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0-geoip-dat-geosite-dat"><span class="toc-number">7.1.</span> <span class="toc-text">æ›´æ–° geoip.dat geosite.dat</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Nginx"><span class="toc-number">8.</span> <span class="toc-text">Nginx</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%83%E4%BC%98-Performance-Tuning"><span class="toc-number">8.1.</span> <span class="toc-text">è°ƒä¼˜ Performance Tuning</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86"><span class="toc-number">8.2.</span> <span class="toc-text">åå‘ä»£ç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E8%AF%81%E4%B9%A6"><span class="toc-number">8.3.</span> <span class="toc-text">æ·»åŠ è¯ä¹¦</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-acme-sh-%E7%94%B3%E8%AF%B7%E8%AF%81%E4%B9%A6"><span class="toc-number">8.3.1.</span> <span class="toc-text">ä½¿ç”¨ acme.sh ç”³è¯·è¯ä¹¦</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Nginx-%E9%85%8D%E7%BD%AE"><span class="toc-number">8.3.2.</span> <span class="toc-text">Nginx é…ç½®</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%A8%E5%9F%9F"><span class="toc-number">8.4.</span> <span class="toc-text">è·¨åŸŸ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E7%94%A8%E5%AE%8C%E6%95%B4%E7%9A%84-nginx-conf"><span class="toc-number">8.5.</span> <span class="toc-text">è‡ªç”¨å®Œæ•´çš„ nginx.conf</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#OpenWRT"><span class="toc-number">9.</span> <span class="toc-text">OpenWRT</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Python"><span class="toc-number">10.</span> <span class="toc-text">Python</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Update-latest-Python-version-%E6%9B%B4%E6%96%B0-Python-%E7%89%88%E6%9C%AC"><span class="toc-number">10.1.</span> <span class="toc-text">Update latest Python version æ›´æ–° Python ç‰ˆæœ¬</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Network-Tools"><span class="toc-number">11.</span> <span class="toc-text">Network Tools</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Windowns-%E5%AE%9E%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">12.</span> <span class="toc-text">Windowns å®ç”¨å‘½ä»¤</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Restart-Windows-Explorer"><span class="toc-number">12.1.</span> <span class="toc-text">Restart Windows Explorer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Clear-Event-Viewer-Logs-bat"><span class="toc-number">12.2.</span> <span class="toc-text">Clear_Event_Viewer_Logs.bat</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#delete-history-cmd"><span class="toc-number">12.3.</span> <span class="toc-text">delete-history.cmd</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E7%94%A8-Reference"><span class="toc-number">13.</span> <span class="toc-text">å¼•ç”¨ Reference</span></a></li></ol></div></aside><a class="btn-toc button" id="btn-toc" tabindex="0"><svg viewBox="0 0 1024 1024" width="32" height="32" xmlns="http://www.w3.org/2000/svg"><path d="M128 256h64V192H128zM320 256h576V192H320zM128 544h64v-64H128zM320 544h576v-64H320zM128 832h64v-64H128zM320 832h576v-64H320z" fill="currentColor"></path></svg></a><div class="toc-menus" id="toc-menus"><div class="toc-title">Article Directory</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E5%8C%BA%E7%AE%A1%E7%90%86%E5%92%8C%E6%93%8D%E4%BD%9C-Partition"><span class="toc-number">1.</span> <span class="toc-text">åˆ†åŒºç®¡ç†å’Œæ“ä½œ (Partition)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A1%AC%E7%9B%98%E6%93%8D%E4%BD%9C-Disk-Operation"><span class="toc-number">2.</span> <span class="toc-text">ç¡¬ç›˜æ“ä½œ (Disk Operation)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%BC%E5%BC%8F%E5%8C%96%E7%A1%AC%E7%9B%98%E4%B8%BA-ETX4-%E6%A0%BC%E5%BC%8F"><span class="toc-number">2.1.</span> <span class="toc-text">æ ¼å¼åŒ–ç¡¬ç›˜ä¸º ETX4 æ ¼å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E7%A1%AC%E7%9B%98%E5%BC%80%E6%9C%BA%E6%8C%82%E8%BD%BD"><span class="toc-number">2.2.</span> <span class="toc-text">è®¾ç½®ç¡¬ç›˜å¼€æœºæŒ‚è½½</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%87%E4%BB%BD%E4%B8%8E%E7%9B%AE%E5%BD%95%E8%BF%81%E7%A7%BB"><span class="toc-number">2.3.</span> <span class="toc-text">å¤‡ä»½ä¸ç›®å½•è¿ç§»</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-tar-gz"><span class="toc-number">2.3.1.</span> <span class="toc-text">ä½¿ç”¨ tar.gz</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HDParm-%E7%A1%AC%E7%9B%98%E4%BC%91%E7%9C%A0"><span class="toc-number">2.4.</span> <span class="toc-text">HDParm ç¡¬ç›˜ä¼‘çœ </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A1%AC%E7%9B%98%E8%87%AA%E5%8A%A8%E6%8C%82%E8%BD%BD"><span class="toc-number">2.5.</span> <span class="toc-text">ç¡¬ç›˜è‡ªåŠ¨æŒ‚è½½</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E7%A1%AC%E7%9B%98%E8%AF%BB%E5%86%99"><span class="toc-number">2.6.</span> <span class="toc-text">æµ‹è¯•ç¡¬ç›˜è¯»å†™</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%AE%9E%E6%97%B6%E7%A1%AC%E7%9B%98%E9%80%9F%E7%8E%87"><span class="toc-number">2.7.</span> <span class="toc-text">æŸ¥çœ‹å®æ—¶ç¡¬ç›˜é€Ÿç‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SMB-%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB"><span class="toc-number">2.8.</span> <span class="toc-text">SMB æ–‡ä»¶å…±äº«</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E7%9B%B8%E5%85%B3"><span class="toc-number">3.</span> <span class="toc-text">è¿›ç¨‹ç›¸å…³</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E5%8A%A8%E6%9F%90%E4%B8%AA%E8%84%9A%E6%9C%AC"><span class="toc-number">3.1.</span> <span class="toc-text">å¼€æœºè‡ªå¯åŠ¨æŸä¸ªè„šæœ¬</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E7%9B%B8%E5%85%B3"><span class="toc-number">4.</span> <span class="toc-text">ç½‘ç»œç›¸å…³</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ApacheBench-AB-%E6%8E%A5%E5%8F%A3-QPS-TPS-%E6%B5%8B%E8%AF%95"><span class="toc-number">4.1.</span> <span class="toc-text">ApacheBench AB æ¥å£ QPS&#x2F;TPS æµ‹è¯•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#OpenVPN"><span class="toc-number">4.2.</span> <span class="toc-text">OpenVPN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%B5%8B%E9%80%9F"><span class="toc-number">4.3.</span> <span class="toc-text">å‘½ä»¤è¡Œæµ‹é€Ÿ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%AE%9E%E6%97%B6%E7%BD%91%E5%8D%A1%E6%B5%81%E9%87%8F"><span class="toc-number">4.4.</span> <span class="toc-text">æŸ¥çœ‹å®æ—¶ç½‘å¡æµé‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#iperf3-%E7%82%B9%E5%AF%B9%E7%82%B9%E7%BD%91%E7%BB%9C%E6%B5%8B%E9%80%9F-%E5%86%85%E7%BD%91"><span class="toc-number">4.5.</span> <span class="toc-text">iperf3 ç‚¹å¯¹ç‚¹ç½‘ç»œæµ‹é€Ÿ (å†…ç½‘)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E9%80%9F%E7%BD%91%E7%AB%99"><span class="toc-number">4.6.</span> <span class="toc-text">æµ‹é€Ÿç½‘ç«™</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E7%9B%91%E5%90%AC%E7%9A%84%E7%AB%AF%E5%8F%A3-view-listening-ports"><span class="toc-number">4.7.</span> <span class="toc-text">æŸ¥çœ‹ç›‘å¬çš„ç«¯å£ view listening ports</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FRP"><span class="toc-number">4.8.</span> <span class="toc-text">FRP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E7%AB%AF%E9%85%8D%E7%BD%AE"><span class="toc-number">4.8.1.</span> <span class="toc-text">æœåŠ¡ç«¯é…ç½®</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="toc-number">4.8.2.</span> <span class="toc-text">å®¢æˆ·ç«¯</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%90%86-configure-proxy"><span class="toc-number">4.9.</span> <span class="toc-text">é…ç½®ä»£ç† configure proxy</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Shell-%E7%9B%B8%E5%85%B3"><span class="toc-number">5.</span> <span class="toc-text">Shell ç›¸å…³</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SSH-%E9%93%BE%E6%8E%A5%E8%B6%85%E6%97%B6%E8%AE%BE%E7%BD%AE"><span class="toc-number">5.1.</span> <span class="toc-text">SSH é“¾æ¥è¶…æ—¶è®¾ç½®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SSH-%E9%85%8D%E7%BD%AE%E5%AF%86%E9%92%A5%E7%99%BB%E9%99%86"><span class="toc-number">5.2.</span> <span class="toc-text">SSH é…ç½®å¯†é’¥ç™»é™†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B8%85%E9%99%A4-ssh-%E6%89%80%E6%9C%89%E7%99%BB%E5%BD%95%E6%97%A5%E5%BF%97"><span class="toc-number">5.3.</span> <span class="toc-text">æ¸…é™¤ ssh æ‰€æœ‰ç™»å½•æ—¥å¿—</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ZSH-%E7%BB%88%E7%AB%AF%E7%BE%8E%E5%8C%96"><span class="toc-number">5.4.</span> <span class="toc-text">ZSH ç»ˆç«¯ç¾åŒ–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SSH-%E8%AE%BE%E7%BD%AE%E5%AF%86%E9%92%A5%E7%99%BB%E9%99%86%E5%B9%B6%E6%B7%BB%E5%8A%A0-hacker-account"><span class="toc-number">5.5.</span> <span class="toc-text">SSH è®¾ç½®å¯†é’¥ç™»é™†å¹¶æ·»åŠ  hacker account</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-SCP-secure-copy-%E5%91%BD%E4%BB%A4%E4%BC%A0%E8%BE%93%E6%96%87%E4%BB%B6"><span class="toc-number">5.6.</span> <span class="toc-text">ä½¿ç”¨ SCP(secure copy) å‘½ä»¤ä¼ è¾“æ–‡ä»¶</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Docker"><span class="toc-number">6.</span> <span class="toc-text">Docker</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-number">6.1.</span> <span class="toc-text">å®‰è£…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Useful-Command"><span class="toc-number">6.2.</span> <span class="toc-text">Useful Command</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%80%E5%90%AF-IPV6"><span class="toc-number">6.3.</span> <span class="toc-text">å¼€å¯ IPV6</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B8%85%E9%99%A4-docker-build-cache"><span class="toc-number">6.4.</span> <span class="toc-text">æ¸…é™¤ docker build cache</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Image-%E5%90%84%E7%A7%8D%E9%95%9C%E5%83%8F"><span class="toc-number">6.5.</span> <span class="toc-text">Image å„ç§é•œåƒ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Portainer-%E7%AE%A1%E7%90%86-UI"><span class="toc-number">6.5.1.</span> <span class="toc-text">Portainer ç®¡ç† UI</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Frps-%E6%9C%8D%E5%8A%A1%E7%AB%AF"><span class="toc-number">6.5.2.</span> <span class="toc-text">Frps æœåŠ¡ç«¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Frpc-%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="toc-number">6.5.3.</span> <span class="toc-text">Frpc å®¢æˆ·ç«¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E7%BD%91%E9%80%9F%E6%B5%8B%E8%AF%95"><span class="toc-number">6.5.4.</span> <span class="toc-text">åˆ°æœåŠ¡å™¨çš„ç½‘é€Ÿæµ‹è¯•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#FileBrowser-%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86"><span class="toc-number">6.5.5.</span> <span class="toc-text">FileBrowser æ–‡ä»¶ç®¡ç†</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#NFS-%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB"><span class="toc-number">6.5.6.</span> <span class="toc-text">NFS æ–‡ä»¶å…±äº«</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DDNS-GO"><span class="toc-number">6.5.7.</span> <span class="toc-text">DDNS-GO</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AdGuardHome-DNS"><span class="toc-number">6.5.8.</span> <span class="toc-text">AdGuardHome DNS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SmartDNS"><span class="toc-number">6.5.9.</span> <span class="toc-text">SmartDNS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#QBittorent-%E7%A7%8D%E5%AD%90%E4%B8%8B%E8%BD%BD"><span class="toc-number">6.5.10.</span> <span class="toc-text">QBittorent ç§å­ä¸‹è½½</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Alist"><span class="toc-number">6.5.11.</span> <span class="toc-text">Alist</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Homarr-%E5%AF%BC%E8%88%AA%E9%A1%B5"><span class="toc-number">6.5.12.</span> <span class="toc-text">Homarr å¯¼èˆªé¡µ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Aria2-%E4%B8%8B%E8%BD%BD"><span class="toc-number">6.5.13.</span> <span class="toc-text">Aria2 ä¸‹è½½</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Mariadb-%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">6.5.14.</span> <span class="toc-text">Mariadb æ•°æ®åº“</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#V2ray-Xray-Server"><span class="toc-number">7.</span> <span class="toc-text">V2ray &#x2F; Xray Server</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0-geoip-dat-geosite-dat"><span class="toc-number">7.1.</span> <span class="toc-text">æ›´æ–° geoip.dat geosite.dat</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Nginx"><span class="toc-number">8.</span> <span class="toc-text">Nginx</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%83%E4%BC%98-Performance-Tuning"><span class="toc-number">8.1.</span> <span class="toc-text">è°ƒä¼˜ Performance Tuning</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86"><span class="toc-number">8.2.</span> <span class="toc-text">åå‘ä»£ç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E8%AF%81%E4%B9%A6"><span class="toc-number">8.3.</span> <span class="toc-text">æ·»åŠ è¯ä¹¦</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-acme-sh-%E7%94%B3%E8%AF%B7%E8%AF%81%E4%B9%A6"><span class="toc-number">8.3.1.</span> <span class="toc-text">ä½¿ç”¨ acme.sh ç”³è¯·è¯ä¹¦</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Nginx-%E9%85%8D%E7%BD%AE"><span class="toc-number">8.3.2.</span> <span class="toc-text">Nginx é…ç½®</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%A8%E5%9F%9F"><span class="toc-number">8.4.</span> <span class="toc-text">è·¨åŸŸ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E7%94%A8%E5%AE%8C%E6%95%B4%E7%9A%84-nginx-conf"><span class="toc-number">8.5.</span> <span class="toc-text">è‡ªç”¨å®Œæ•´çš„ nginx.conf</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#OpenWRT"><span class="toc-number">9.</span> <span class="toc-text">OpenWRT</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Python"><span class="toc-number">10.</span> <span class="toc-text">Python</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Update-latest-Python-version-%E6%9B%B4%E6%96%B0-Python-%E7%89%88%E6%9C%AC"><span class="toc-number">10.1.</span> <span class="toc-text">Update latest Python version æ›´æ–° Python ç‰ˆæœ¬</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Network-Tools"><span class="toc-number">11.</span> <span class="toc-text">Network Tools</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Windowns-%E5%AE%9E%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">12.</span> <span class="toc-text">Windowns å®ç”¨å‘½ä»¤</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Restart-Windows-Explorer"><span class="toc-number">12.1.</span> <span class="toc-text">Restart Windows Explorer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Clear-Event-Viewer-Logs-bat"><span class="toc-number">12.2.</span> <span class="toc-text">Clear_Event_Viewer_Logs.bat</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#delete-history-cmd"><span class="toc-number">12.3.</span> <span class="toc-text">delete-history.cmd</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E7%94%A8-Reference"><span class="toc-number">13.</span> <span class="toc-text">å¼•ç”¨ Reference</span></a></li></ol></div><article class="post post__with-toc content-card"><div class="post__header"><div class="post-thumbnail lazy" data-bg="https://api.whaleluo.top/onedrive/file/?path=/picstorage/blog/img/Linux-Operation-Note-Banner.png"></div><div class="post__expire" id="post-expired-notify"><p>This article was last updated on &lt;span id=&#34;expire-date&#34;&gt;&lt;/span&gt; days ago, the information described in the article may be outdated.</p></div><script>(() => {
            var update = Date.parse("2022-03-20"),
                date = new Date(),
                now = date.getTime(),
                expire = now - update,
                expire_days = Math.floor(expire/(24*3600*1000));
            if (expire_days >= 120) {
                document.querySelectorAll('#expire-date')[0].innerHTML = expire_days;
                document.querySelectorAll('#post-expired-notify')[0].style.display = 'block';
            }
        })();</script></div><div class="post__content"><h1 id="Linux-Operation-Note"><a href="#Linux-Operation-Note" class="headerlink" title="Linux Operation Note"></a>Linux Operation Note</h1><p>â€‹<img src="https://api.whaleluo.top/onedrive/file/?path=/picstorage/blog/img/Linux-Operation-Note-Banner.png&webp=true" class="lazy" data-srcset="https://api.whaleluo.top/onedrive/file/?path=/picstorage/blog/img/Linux-Operation-Note-Banner.png&webp=true" srcset="https://api.whaleluo.top/onedrive/file/?path=/PicStorage/blog/loading.gif" alt="image">â€‹</p><h2 id="åˆ†åŒºç®¡ç†å’Œæ“ä½œ-Partition"><a href="#åˆ†åŒºç®¡ç†å’Œæ“ä½œ-Partition" class="headerlink" title="åˆ†åŒºç®¡ç†å’Œæ“ä½œ (Partition)"></a>åˆ†åŒºç®¡ç†å’Œæ“ä½œ (Partition)</h2><p>ä½¿ç”¨ cfdisk ä»£æ›¿ fdisk å®ç°å¯è§†åŒ–çš„ç¡¬ç›˜åˆ†åŒº. æœ‰ GUI ç¯å¢ƒå¯ä»¥ä½¿ç”¨ gparted.</p><pre><code class="hljs shell">apt-get install cfdisk</code></pre><p>åˆ†é…æ‰©å±•çš„ç©ºé—´å¯ä»¥ä½¿ç”¨ <code>resize2fs</code> å‘½ä»¤.</p><pre><code class="hljs shell">resize2fs /dev/sda1</code></pre><p>æ‰©å±•è™šæ‹Ÿæœºç¡¬ç›˜å¤§å°æ˜¯, è®°å¾—è¦ä¿®æ”¹ swap(äº¤æ¢åˆ†åŒº) çš„ UUID</p><blockquote><p>Linux swap(äº¤æ¢åˆ†åŒº) æ˜¯ä¸€ç§å†…å­˜ç®¡ç†æŠ€æœ¯,ç”¨äºåœ¨ç‰©ç†å†…å­˜(RAM)ä¸å¤Ÿç”¨æ—¶,å°†éƒ¨åˆ†å†…å­˜æ•°æ®ä¸´æ—¶å­˜å‚¨åˆ°ç¡¬ç›˜ä¸Šçš„ç‰¹æ®Šåˆ†åŒº(äº¤æ¢åˆ†åŒº)ä¸­.å®ƒçš„ä¸»è¦ä½œç”¨åŒ…æ‹¬: 1. æ‰©å±•å†…å­˜å®¹é‡ 2. æ”¯æŒä¼‘çœ åŠŸèƒ½ 3. æé«˜ç³»ç»Ÿç¨³å®šæ€§ 4.å†…å­˜æ¸…ç†<br>swap ä¸å¯ä»¥å®Œå…¨åˆ é™¤, å› ä¸ºéƒ¨åˆ†è½¯ä»¶ä¼šä¾èµ–äº swap æ‰å¯ä»¥æ­£å¸¸è¿è¡Œ.</p></blockquote><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">å»ºç«‹ swap</span>
mkswap /dev/sda2
<span class="hljs-meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹ UUID</span>
blkid
<span class="hljs-meta prompt_"># </span><span class="language-bash">ä¿®æ”¹ UUID</span>
vim /etc/fstab</code></pre><h2 id="ç¡¬ç›˜æ“ä½œ-Disk-Operation"><a href="#ç¡¬ç›˜æ“ä½œ-Disk-Operation" class="headerlink" title="ç¡¬ç›˜æ“ä½œ (Disk Operation)"></a>ç¡¬ç›˜æ“ä½œ (Disk Operation)</h2><p>äº†è§£ä¸¤ä¸ªç‰¹æ®Šçš„è®¾å¤‡:</p><ol><li>&#x2F;dev&#x2F;null:å›æ”¶ç«™ã€æ— åº•æ´.</li><li>&#x2F;dev&#x2F;zero:äº§ç”Ÿå­—ç¬¦.</li></ol><h3 id="æ ¼å¼åŒ–ç¡¬ç›˜ä¸º-ETX4-æ ¼å¼"><a href="#æ ¼å¼åŒ–ç¡¬ç›˜ä¸º-ETX4-æ ¼å¼" class="headerlink" title="æ ¼å¼åŒ–ç¡¬ç›˜ä¸º ETX4 æ ¼å¼"></a>æ ¼å¼åŒ–ç¡¬ç›˜ä¸º ETX4 æ ¼å¼</h3><pre><code class="hljs shell">mkfs.ext4 /dev/*** #å°†ç¡¬ç›˜æ ¼å¼åŒ–æˆ ext4 æ ¼å¼</code></pre><h3 id="è®¾ç½®ç¡¬ç›˜å¼€æœºæŒ‚è½½"><a href="#è®¾ç½®ç¡¬ç›˜å¼€æœºæŒ‚è½½" class="headerlink" title="è®¾ç½®ç¡¬ç›˜å¼€æœºæŒ‚è½½"></a>è®¾ç½®ç¡¬ç›˜å¼€æœºæŒ‚è½½</h3><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">1.é€šè¿‡ lsblk å‘½ä»¤è·å–ç£ç›˜åˆ†åŒº,å¹¶æŒ‚è½½ç£ç›˜åˆ°mntsç›®å½•.</span>
lsblk
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">2.é€šè¿‡ blkid å‘½ä»¤è·å–å­˜å‚¨è®¾å¤‡UUID</span>
blkid /dev/sda
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">3.ç¼–è¾‘ /etc/fstab æ–‡ä»¶,åœ¨fstabæœ€åæ·»åŠ å­˜å‚¨è®¾å¤‡ä¿¡æ¯,å®ç°å¼€æœºè‡ªåŠ¨åŠ è½½</span>
vim /etc/fstab
UUID=cdfc0924-7703-40f4-b6ab-8ef3f9adbf06 /mnt/disk ext4 defaults 0 0
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">4.é€šè¿‡mount -aå‘½ä»¤é‡æ–°åŠ è½½ /etc/fstab å†…å®¹</span>
mount -a
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">å¸¸ç”¨æŸ¥è¯¢ç¡¬ç›˜å‘½ä»¤</span>
fdisk -l
df -h</code></pre><h3 id="å¤‡ä»½ä¸ç›®å½•è¿ç§»"><a href="#å¤‡ä»½ä¸ç›®å½•è¿ç§»" class="headerlink" title="å¤‡ä»½ä¸ç›®å½•è¿ç§»"></a>å¤‡ä»½ä¸ç›®å½•è¿ç§»</h3><h4 id="ä½¿ç”¨-tar-gz"><a href="#ä½¿ç”¨-tar-gz" class="headerlink" title="ä½¿ç”¨ tar.gz"></a>ä½¿ç”¨ tar.gz</h4><p>å¤‡ä»½æ‰“åŒ…:</p><pre><code class="hljs shell">tar -czvf backup.tar.gz /path/to/directory</code></pre><p>è¿™å°†ä½¿ç”¨ Â <code>tar</code>Â  å‘½ä»¤å°†æŒ‡å®šç›®å½•æ‰“åŒ…æˆä¸€ä¸ªå‹ç¼©æ–‡ä»¶ Â <code>backup.tar.gz</code>.ä½ å¯ä»¥å°† Â <code>/path/to/directory</code>Â  æ›¿æ¢ä¸ºè¦å¤‡ä»½çš„ç›®å½•è·¯å¾„.ä½¿ç”¨ Â <code>-c</code>Â  å‚æ•°è¡¨ç¤ºåˆ›å»ºæ–°çš„å¤‡ä»½,<code>-z</code>Â  å‚æ•°è¡¨ç¤ºä½¿ç”¨ gzip å‹ç¼©,<code>-v</code>Â  å‚æ•°è¡¨ç¤ºæ˜¾ç¤ºå¤‡ä»½è¿‡ç¨‹ä¸­çš„è¯¦ç»†ä¿¡æ¯.</p><p>è¿˜åŸå¤‡ä»½:</p><pre><code class="hljs shell">tar -xzvf backup.tar.gz -C /path/to/destination</code></pre><p>è¿™å°†ä½¿ç”¨ Â <code>tar</code>Â  å‘½ä»¤è§£å‹ç¼©å¤‡ä»½æ–‡ä»¶ Â <code>backup.tar.gz</code>Â  å¹¶å°†æ–‡ä»¶è¿˜åŸåˆ°ç›®æ ‡ç›®å½• Â <code>/path/to/destination</code>.ä½¿ç”¨ Â <code>-x</code>Â  å‚æ•°è¡¨ç¤ºè§£å‹ç¼©,<code>-z</code>Â  å‚æ•°è¡¨ç¤ºä½¿ç”¨ gzip è§£å‹ç¼©,<code>-v</code>Â  å‚æ•°è¡¨ç¤ºæ˜¾ç¤ºè¿˜åŸè¿‡ç¨‹ä¸­çš„è¯¦ç»†ä¿¡æ¯,<code>-C</code>Â  å‚æ•°æŒ‡å®šè¿˜åŸåˆ°çš„ç›®æ ‡ç›®å½•.</p><h3 id="HDParm-ç¡¬ç›˜ä¼‘çœ "><a href="#HDParm-ç¡¬ç›˜ä¼‘çœ " class="headerlink" title="HDParm ç¡¬ç›˜ä¼‘çœ "></a>HDParm ç¡¬ç›˜ä¼‘çœ </h3><p>è®©ä½ çš„ç¡¬ç›˜å†·é™ä¸‹æ¥,ä¸è¦è®©æœåŠ¡å™¨å‘¼å™œå‘¼å™œ!</p><pre><code class="hljs shell">apt-get install hdparm
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">5 åˆ†é’Ÿæ— æ“ä½œè‡ªåŠ¨ä¼‘çœ </span>
hdparm -S 60 /dev/sda1
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">è¿›å…¥å¾…æœº</span>
hdparm -y /dev/sda1
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">è¿›å…¥ç¡çœ </span>
hdparm -Y /dev/sda1
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹é…ç½®</span>
vim /etc/hdparm.conf</code></pre><h3 id="ç¡¬ç›˜è‡ªåŠ¨æŒ‚è½½"><a href="#ç¡¬ç›˜è‡ªåŠ¨æŒ‚è½½" class="headerlink" title="ç¡¬ç›˜è‡ªåŠ¨æŒ‚è½½"></a>ç¡¬ç›˜è‡ªåŠ¨æŒ‚è½½</h3><p>åœ¨ Â <code>/etc/fstab</code>Â  æ–‡ä»¶ä¸­ä¸ºç¡¬ç›˜æŒ‡å®šäº† Â <code>nofail</code>Â  é€‰é¡¹,ç³»ç»Ÿå°†å¿½ç•¥æ‰¾ä¸åˆ°ç¡¬ç›˜çš„é”™è¯¯,å¹¶ç»§ç»­å¯åŠ¨è¿‡ç¨‹.</p><pre><code class="hljs shell">mkdir /mnt/disk/
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">è·å–åˆ†åŒº UUID å’Œ Type</span>
blkid
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">ç¼–è¾‘ /etc/fstab</span>
UUID=7673-85E5 /mnt/disk exfat defaults,nofail 0 2
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">æ‰§è¡Œå…¨éƒ¨æŒ‚è½½</span>
mount -a</code></pre><p>å¦‚æœä¸å¹¸ <code>/etc/fstab</code> æ²¡æœ‰æ­£ç¡®è®¾ç½®æ—¶,Ubuntu ä»ç„¶ä¼šå¯åŠ¨,ä½†æ˜¯æ–‡ä»¶ç³»ç»Ÿå˜ä¸ºåªè¯» read-only,éœ€è¦æŠŠæ–‡ä»¶ç³»ç»Ÿé‡æ–°æŒ‚è½½ä¸ºè¯»å†™å°† <code>/etc/fstab</code> è®¾ç½®æ­£ç¡®åé‡å¯ä¿å­˜.</p><pre><code class="hljs shell">mount -o remount rw /</code></pre><h3 id="æµ‹è¯•ç¡¬ç›˜è¯»å†™"><a href="#æµ‹è¯•ç¡¬ç›˜è¯»å†™" class="headerlink" title="æµ‹è¯•ç¡¬ç›˜è¯»å†™"></a>æµ‹è¯•ç¡¬ç›˜è¯»å†™</h3><pre><code class="hljs shell">hdparm -Tt /dev/sda</code></pre><h3 id="æŸ¥çœ‹å®æ—¶ç¡¬ç›˜é€Ÿç‡"><a href="#æŸ¥çœ‹å®æ—¶ç¡¬ç›˜é€Ÿç‡" class="headerlink" title="æŸ¥çœ‹å®æ—¶ç¡¬ç›˜é€Ÿç‡"></a>æŸ¥çœ‹å®æ—¶ç¡¬ç›˜é€Ÿç‡</h3><h3 id="SMB-æ–‡ä»¶å…±äº«"><a href="#SMB-æ–‡ä»¶å…±äº«" class="headerlink" title="SMB æ–‡ä»¶å…±äº«"></a>SMB æ–‡ä»¶å…±äº«</h3><pre><code class="hljs shell">sudo apt update
sudo apt install samba
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">ç”¨æˆ·æ·»åŠ </span>
sudo smbpasswd -a root</code></pre><blockquote><p>NOTE: Whenever you modify this file you should run the command <code>testparm</code> to check that you have not made any basic syntactic errors.</p></blockquote><pre><code class="hljs ini"><span class="hljs-section">[mntReadDir]</span>
<span class="hljs-attr">comment</span> = Ubuntu mnt dir
<span class="hljs-attr">path</span> = /mnt/
read <span class="hljs-attr">only</span> = <span class="hljs-literal">yes</span>
<span class="hljs-attr">browsable</span> = <span class="hljs-literal">yes</span>
guest <span class="hljs-attr">ok</span> = <span class="hljs-literal">yes</span>
create <span class="hljs-attr">mask</span> = <span class="hljs-number">0777</span>
directory <span class="hljs-attr">mask</span> = <span class="hljs-number">0777</span>

<span class="hljs-section">[tmp]</span>
<span class="hljs-attr">comment</span> = Ubuntu Tmp
<span class="hljs-attr">path</span> = /tmp/
read <span class="hljs-attr">only</span> = <span class="hljs-literal">no</span>
<span class="hljs-attr">browsable</span> = <span class="hljs-literal">yes</span>
guest <span class="hljs-attr">ok</span> = <span class="hljs-literal">yes</span>
create <span class="hljs-attr">mask</span> = <span class="hljs-number">0777</span>
directory <span class="hljs-attr">mask</span> = <span class="hljs-number">0777</span>

<span class="hljs-section">[mntPrivate]</span>
<span class="hljs-attr">comment</span> = Ubuntu mnt dir
<span class="hljs-attr">path</span> = /mnt/
read <span class="hljs-attr">only</span> = <span class="hljs-literal">no</span>
<span class="hljs-attr">browsable</span> = <span class="hljs-literal">yes</span>
guest <span class="hljs-attr">ok</span> = <span class="hljs-literal">no</span>
create <span class="hljs-attr">mask</span> = <span class="hljs-number">0777</span>
directory <span class="hljs-attr">mask</span> = <span class="hljs-number">0777</span></code></pre><h2 id="è¿›ç¨‹ç›¸å…³"><a href="#è¿›ç¨‹ç›¸å…³" class="headerlink" title="è¿›ç¨‹ç›¸å…³"></a>è¿›ç¨‹ç›¸å…³</h2><h3 id="å¼€æœºè‡ªå¯åŠ¨æŸä¸ªè„šæœ¬"><a href="#å¼€æœºè‡ªå¯åŠ¨æŸä¸ªè„šæœ¬" class="headerlink" title="å¼€æœºè‡ªå¯åŠ¨æŸä¸ªè„šæœ¬"></a>å¼€æœºè‡ªå¯åŠ¨æŸä¸ªè„šæœ¬</h3><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">ç¼–è¾‘ systemctl æ–‡ä»¶</span>
vim /etc/systemd/system/ttnode.service
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">æ–‡ä»¶å†…å®¹</span>
[Unit]
Description=Python Task Service
After=network.target

[Service]
Type=simple
User=root
Group=root
ExecStart=/usr/node/ttnode -p /mnt/disk/
Restart=always
RestartSec=2
PrivateTmp=true

[Install]
WantedBy=multi-user.target
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">é‡è½½</span>
systemctl daemon-reload
<span class="hljs-meta prompt_"># </span><span class="language-bash">å¯åŠ¨</span>
systemctl start ttnode
<span class="hljs-meta prompt_"># </span><span class="language-bash">å¼€æœºè‡ªå¯</span>
systemctl enable ttnode</code></pre><h2 id="ç½‘ç»œç›¸å…³"><a href="#ç½‘ç»œç›¸å…³" class="headerlink" title="ç½‘ç»œç›¸å…³"></a>ç½‘ç»œç›¸å…³</h2><h3 id="ApacheBench-AB-æ¥å£-QPS-TPS-æµ‹è¯•"><a href="#ApacheBench-AB-æ¥å£-QPS-TPS-æµ‹è¯•" class="headerlink" title="ApacheBench AB æ¥å£ QPS&#x2F;TPS æµ‹è¯•"></a>ApacheBench AB æ¥å£ QPS&#x2F;TPS æµ‹è¯•</h3><ul><li><strong>å¹¶å‘æ•°</strong>(concurrent):å¹¶å‘æ•°åªæŸä¸ªæ—¶é—´èŒƒå›´å†….åŒæ—¶åœ¨ä½¿ç”¨ç³»ç»Ÿçš„ç”¨æˆ·ä¸ªæ•°.ä»å®é™…åœºæ™¯æ¥çœ‹,å¹¶å‘æ•°å°±æ˜¯åŒæ—¶ä½¿ç”¨è¯¥æœåŠ¡å™¨æ¥å£çš„å®¢æˆ·ç«¯æ•°,è¿™äº›å®¢æˆ·ç«¯å¯èƒ½è°ƒç”¨ä¸åŒçš„ API.ä¸¥æ ¼æ„ä¹‰ä¸Šæ¥è¯´,å¹¶å‘æ•°æ˜¯æŒ‡åŒæ—¶è¯·æ±‚åŒä¸€ä¸ª API çš„ç”¨æˆ·ä¸ªæ•°.</li><li><strong>QPS</strong>:<code>Queries Per Second</code> æ„æ€æ˜¯â€æ¯ç§’æŸ¥è¯¢ç‡â€,æ˜¯æ¥å£æ¯ç§’èƒ½å¤Ÿç›¸åº”çš„æŸ¥è¯¢æ¬¡æ•°,æ˜¯å¯¹ä¸€ä¸ªç‰¹å®šçš„æŸ¥è¯¢æœåŠ¡å™¨åœ¨è§„å®šæ—¶é—´å†…æ‰€å¤„ç†æµé‡å¤šå°‘çš„è¡¡é‡æ ‡å‡†.</li><li><strong>TPS</strong>:æ˜¯ <code>Transactions Per Second</code> çš„ç¼©å†™,ä¹Ÿå°±æ˜¯äº‹åŠ¡æ•°&#x2F;ç§’.å®ƒæ˜¯è½¯ä»¶æµ‹è¯•ç»“æœçš„æµ‹é‡å•ä½.ä¸€ä¸ªäº‹åŠ¡æ˜¯æŒ‡ä¸€ä¸ªå®¢æˆ·æœºå‘æœåŠ¡å™¨å‘é€è¯·æ±‚ç„¶åæœåŠ¡å™¨åšå‡ºååº”çš„è¿‡ç¨‹.å®¢æˆ·æœºåœ¨å‘é€è¯·æ±‚æ—¶å¼€å§‹è®¡æ—¶,æ”¶åˆ°æœåŠ¡å™¨å“åº”åç»“æŸè®¡æ—¶,ä»¥æ­¤æ¥è®¡ç®—ä½¿ç”¨çš„æ—¶é—´å’Œå®Œæˆçš„äº‹åŠ¡ä¸ªæ•°.</li></ul><p><strong>QPS</strong> åŸºæœ¬ç±»ä¼¼äº <strong>TPS</strong>,ä½†æ˜¯ä¸åŒçš„æ˜¯,å¯¹äºä¸€ä¸ªé¡µé¢çš„ä¸€æ¬¡è®¿é—®,å½¢æˆä¸€ä¸ª Tps;ä½†ä¸€æ¬¡é¡µé¢è¯·æ±‚,å¯èƒ½äº§ç”Ÿå¤šæ¬¡å¯¹æœåŠ¡å™¨çš„è¯·æ±‚,æœåŠ¡å™¨å¯¹è¿™äº›è¯·æ±‚,å°±å¯è®¡å…¥ <strong>QPS</strong> ä¹‹ä¸­.</p><p>ä¾‹å¦‚:è®¿é—®ä¸€ä¸ªé¡µé¢ä¼šè¯·æ±‚æœåŠ¡å™¨ 3 æ¬¡,ä¸€æ¬¡è®¿é—®, äº§ç”Ÿä¸€ä¸ªâ€Tâ€,äº§ç”Ÿ 3 ä¸ªâ€Qâ€</p><pre><code class="hljs shell">apt-get install apache2-utils
<span class="hljs-meta prompt_"># </span><span class="language-bash">æ‰“å¼€æ–‡ä»¶é™åˆ¶</span>
ulimitÂ -SHnÂ 65536
echoÂ &quot;*Â softÂ nofileÂ 65536&quot;Â &gt;&gt;/etc/security/limits.conf
echoÂ &quot;*Â hardÂ nofileÂ 65536&quot;Â &gt;&gt;/etc/security/limits.conf

ab -n 500 -c 64 &quot;https://api.whaleluo.top/onedrive/check/&quot;
ab -n 1000 -c 256 &quot;https://api.whaleluo.top/&quot;</code></pre><h3 id="OpenVPN"><a href="#OpenVPN" class="headerlink" title="OpenVPN"></a>OpenVPN</h3><blockquote><p>å‚è€ƒ:<a target="_blank" rel="noopener" href="https://serverfault.com/questions/785767/with-openvpn-how-can-i-only-let-lan-go-through-the-vpn">çª—å£ - ä½¿ç”¨ OpenVPN,æˆ‘å¦‚ä½•åªèƒ½è®©å±€åŸŸç½‘é€šè¿‡ VPN?- æœåŠ¡å™¨æ•…éšœ (serverfault.com)</a> <strong>é‡è¦</strong></p><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/lsgxeva/p/11378768.html">ROUTE: route addition failed - lsgxeva - åšå®¢å›­ (cnblogs.com)</a></p><p><a target="_blank" rel="noopener" href="https://superuser.com/questions/1608345/how-to-route-only-subnet-in-openvpn-and-not-internet-traffic">networking - How to route only subnet in OpenVPN and not internet traffic - Super User</a></p></blockquote><p>å®‰è£…è„šæœ¬:<a target="_blank" rel="noopener" href="https://github.com/Nyr/openvpn-install">Nyr&#x2F;openvpn-install</a></p><p>æœåŠ¡ç«¯:<code>server.conf</code></p><pre><code class="hljs ini">server 192.168.255.0 255.255.255.0
verb 3
key /etc/openvpn/pki/private/0.0.0.0.key
ca /etc/openvpn/pki/ca.crt
cert /etc/openvpn/pki/issued/0.0.0.0.crt
dh /etc/openvpn/pki/dh.pem
tls-auth /etc/openvpn/pki/ta.key
key-direction 0
keepalive 10 60
persist-key
persist-tun

proto tcp
<span class="hljs-comment"># Rely on Docker to do port mapping, internally always 1194</span>
port 1194
dev tun0
status /tmp/openvpn-status.log

user nobody
group nogroup
comp-lzo no

<span class="hljs-comment">### Route Configurations Below</span>
route 192.168.254.0 225.225.225.0

<span class="hljs-comment">### Push Configurations Below</span></code></pre><p>å®¢æˆ·ç«¯:<code>client.conf</code></p><pre><code class="hljs ini">client
nobind
dev tun
remote-cert-tls server
remote tx.cyidz.xyz 11194 tcp

&lt;key&gt;
-----BEGIN PRIVATE KEY-----
....
-----END CERTIFICATE-----
&lt;/ca&gt;
key-direction 1
&lt;tls-auth&gt;
<span class="hljs-comment">#</span>
<span class="hljs-comment"># 2048 bit OpenVPN static key</span>
<span class="hljs-comment">#</span>
-----BEGIN OpenVPN Static key V1-----
....
-----END OpenVPN Static key V1-----
&lt;/tls-auth&gt;

<span class="hljs-comment"># redirect-gateway def1  # æ³¨é‡Šæ‰</span>
dhcp-option DNS 114.114.114.114 <span class="hljs-comment"># è‡ªå®šä¹‰DNS</span>
route 192.168.1.0 255.255.255.0  <span class="hljs-comment"># æ·»åŠ è·¯ç”±</span>
route 192.168.0.0 255.255.255.0</code></pre><h3 id="å‘½ä»¤è¡Œæµ‹é€Ÿ"><a href="#å‘½ä»¤è¡Œæµ‹é€Ÿ" class="headerlink" title="å‘½ä»¤è¡Œæµ‹é€Ÿ"></a>å‘½ä»¤è¡Œæµ‹é€Ÿ</h3><p>ä½¿ç”¨å—å¼€å¤§å­¦çš„å‘½ä»¤è¡Œæµ‹é€Ÿ: <a target="_blank" rel="noopener" href="https://test.nju.edu.cn/">å—å¤§æµ‹é€Ÿ NJU Test</a><br><a target="_blank" rel="noopener" href="https://doc.nju.edu.cn/books/07cdf/page/d1f25">ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·æµ‹é€Ÿ | e-Science Document</a></p><pre><code class="hljs shell">wget https://github.com/librespeed/speedtest-cli/releases/download/v1.0.10/librespeed-cli_1.0.10_linux_amd64.tar.gz
tar -xzvf // unpack
./librespeed-cli --server-json http://test.nju.edu.cn/cli.json --server 1</code></pre><h3 id="æŸ¥çœ‹å®æ—¶ç½‘å¡æµé‡"><a href="#æŸ¥çœ‹å®æ—¶ç½‘å¡æµé‡" class="headerlink" title="æŸ¥çœ‹å®æ—¶ç½‘å¡æµé‡"></a>æŸ¥çœ‹å®æ—¶ç½‘å¡æµé‡</h3><p>ä½¿ç”¨ nload å·¥å…·</p><pre><code class="hljs shell">apt-get install nload</code></pre><h3 id="iperf3-ç‚¹å¯¹ç‚¹ç½‘ç»œæµ‹é€Ÿ-å†…ç½‘"><a href="#iperf3-ç‚¹å¯¹ç‚¹ç½‘ç»œæµ‹é€Ÿ-å†…ç½‘" class="headerlink" title="iperf3 ç‚¹å¯¹ç‚¹ç½‘ç»œæµ‹é€Ÿ (å†…ç½‘)"></a>iperf3 ç‚¹å¯¹ç‚¹ç½‘ç»œæµ‹é€Ÿ (å†…ç½‘)</h3><p>iperf&#x2F;iperf3 æ˜¯ä¸€ä¸ªå¼ºå¤§çš„æµ‹è¯•ç½‘ç»œæœ€å¤§å¸¦å®½å·¥å…·.ä½œä¸ºä¸€ä¸ªè·¨å¹³å°çš„å·¥å…·,å¯ä»¥ä¸ºä»»ä½•ç½‘ç»œæä¾›æ ‡å‡†åŒ–çš„æ€§èƒ½æµ‹é‡.iperf&#x2F;iperf3 å…·æœ‰å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åŠŸèƒ½,å¯ä»¥åˆ›å»ºæ•°æ®æµæ¥æµ‹é‡ä¸¤ç«¯ä¹‹é—´å•å‘æˆ–åŒå‘çš„ç½‘ç»œååé‡. å¹¶æ”¯æŒ TCP&#x2F;UDP, åå‘è¿æ¥.</p><pre><code class="hljs shell">sudo apt install iperf3
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">run as server specify port</span>
iperf3 -s -p 65530
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">run as client</span>
iperf3 -c xxx.xxx.xxx.xxx -p 65530 -t 60 -i 5
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">reverse <span class="hljs-built_in">test</span></span>
iperf3 -c xxx.xxx.xxx.xxx -p 65530 -t 60 -i 5 -R
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">multiple data streams</span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">concurrent 10</span>
iperf3 -c xxx.xxx.xxx.xxx -P 10 -p 65530
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-built_in">test</span> UDP</span>
iperf3 -c xxx.xxx.xxx.xxx -u -p 65530 -b 3000M -t 60
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-keyword">if</span> u have multiple network card, use -B to specify</span>
iperf3 -c xxx.xxx.xxx.xxx -B &lt;card_ip&gt;</code></pre><h3 id="æµ‹é€Ÿç½‘ç«™"><a href="#æµ‹é€Ÿç½‘ç«™" class="headerlink" title="æµ‹é€Ÿç½‘ç«™"></a>æµ‹é€Ÿç½‘ç«™</h3><ol><li>NJU å—å¤§æµ‹é€Ÿ æ”¯æŒå‘½ä»¤è¡Œ:<a target="_blank" rel="noopener" href="https://test.nju.edu.cn/">å—å¤§æµ‹é€Ÿ NJU Test</a></li><li>ä¸­ç§‘å¤§æµ‹é€Ÿ:<a target="_blank" rel="noopener" href="https://test.ustc.edu.cn/">ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦æµ‹é€Ÿç½‘ç«™</a></li><li>ç”µä¿¡å®½å¸¦æµ‹é€Ÿ:<a target="_blank" rel="noopener" href="https://10000.gd.cn/#/speed">10000.gd.cn&#x2F;#&#x2F;speed</a></li><li>å°å¤§æµ‹é€Ÿ(æµ‹æµ·å¤–):<a target="_blank" rel="noopener" href="http://speed5.ntu.edu.tw/speed5/">NTU Speed5</a></li></ol><h3 id="æŸ¥çœ‹ç›‘å¬çš„ç«¯å£-view-listening-ports"><a href="#æŸ¥çœ‹ç›‘å¬çš„ç«¯å£-view-listening-ports" class="headerlink" title="æŸ¥çœ‹ç›‘å¬çš„ç«¯å£ view listening ports"></a>æŸ¥çœ‹ç›‘å¬çš„ç«¯å£ view listening ports</h3><pre><code class="hljs shell">sudo lsof -i -P -n | grep LISTEN</code></pre><h3 id="FRP"><a href="#FRP" class="headerlink" title="FRP"></a>FRP</h3><p>2023&#x2F;12&#x2F;3: èµ·çŒ›äº†,FRP æ›´æ–°åˆ°äº† 0.52.3 ç‰ˆæœ¬,2023&#x2F;12&#x2F;3 ç‰ˆæœ¬,ä½¿ç”¨ toml æ–‡ä»¶é…ç½®.</p><p>GitHub:<a target="_blank" rel="noopener" href="https://github.com/fatedier/frp">GitHub - fatedier&#x2F;frp: A fast reverse proxy to help you expose a local server behind a NAT or firewall to the internet.</a></p><p>å®Œæ•´é…ç½®ç¤ºä¾‹:<a target="_blank" rel="noopener" href="https://github.com/fatedier/frp/tree/dev/conf">conf</a></p><h4 id="æœåŠ¡ç«¯é…ç½®"><a href="#æœåŠ¡ç«¯é…ç½®" class="headerlink" title="æœåŠ¡ç«¯é…ç½®"></a>æœåŠ¡ç«¯é…ç½®</h4><p>frps.toml</p><pre><code class="hljs toml"><span class="hljs-comment"># frps server config</span>
<span class="hljs-attr">bindAddr</span> = <span class="hljs-string">&quot;0.0.0.0&quot;</span>
<span class="hljs-attr">bindPort</span> = <span class="hljs-number">7000</span>
<span class="hljs-attr">kcpBindPort</span> = <span class="hljs-number">7000</span>
<span class="hljs-attr">quicBindPort</span> = <span class="hljs-number">7002</span>

<span class="hljs-comment"># TCP MUX</span>
<span class="hljs-comment"># transport.tcpMux = true</span>

<span class="hljs-comment"># tls</span>
<span class="hljs-attr">tls.force</span> = <span class="hljs-literal">true</span>


<span class="hljs-comment"># If you want to support virtual host, you must set the http port for listening (optional)</span>
<span class="hljs-comment"># <span class="hljs-doctag">Note:</span> http port and https port can be same with bindPort</span>
<span class="hljs-attr">vhostHTTPPort</span> = <span class="hljs-number">80</span>
<span class="hljs-attr">vhostHTTPSPort</span> = <span class="hljs-number">443</span>

<span class="hljs-comment"># admin</span>
<span class="hljs-attr">webServer.addr</span> = <span class="hljs-string">&quot;0.0.0.0&quot;</span>
<span class="hljs-attr">webServer.port</span> = <span class="hljs-number">7500</span>
<span class="hljs-attr">webServer.user</span> = <span class="hljs-string">&quot;admin&quot;</span>
<span class="hljs-attr">webServer.password</span> = <span class="hljs-string">&quot;admin&quot;</span>


<span class="hljs-comment"># log config</span>
<span class="hljs-attr">log.to</span> = <span class="hljs-string">&quot;./frps.log&quot;</span>
<span class="hljs-comment"># trace, debug, info, warn, error</span>
<span class="hljs-attr">log.level</span> = <span class="hljs-string">&quot;info&quot;</span>
<span class="hljs-attr">log.maxDays</span> = <span class="hljs-number">3</span>
<span class="hljs-attr">log.disablePrintColor</span> = <span class="hljs-literal">false</span>
<span class="hljs-attr">detailedErrorsToClient</span> = <span class="hljs-literal">true</span>


<span class="hljs-comment"># auth</span>
<span class="hljs-attr">auth.method</span> = <span class="hljs-string">&quot;token&quot;</span>
<span class="hljs-attr">auth.token</span> = <span class="hljs-string">&quot;12345678&quot;</span>
<span class="hljs-attr">allowPorts</span> = [
  &#123; start = <span class="hljs-number">2000</span>, end = <span class="hljs-number">3000</span> &#125;,
  &#123; single = <span class="hljs-number">3001</span> &#125;,
  &#123; single = <span class="hljs-number">3003</span> &#125;,
  &#123; start = <span class="hljs-number">4000</span>, end = <span class="hljs-number">50000</span> &#125;
]


<span class="hljs-attr">maxPortsPerClient</span> = <span class="hljs-number">0</span>

<span class="hljs-attr">subDomainHost</span> = <span class="hljs-string">&quot;frps.com&quot;</span>

<span class="hljs-comment"># custom404Page = &quot;/path/to/404.html&quot;</span></code></pre><pre><code class="hljs toml"><span class="hljs-comment"># frps server config</span>
<span class="hljs-attr">bindAddr</span> = <span class="hljs-string">&quot;0.0.0.0&quot;</span>
<span class="hljs-attr">bindPort</span> = <span class="hljs-number">43200</span>
<span class="hljs-attr">kcpBindPort</span> = <span class="hljs-number">43201</span>
<span class="hljs-attr">quicBindPort</span> = <span class="hljs-number">43202</span>

<span class="hljs-comment"># TCP MUX</span>
<span class="hljs-comment"># transport.tcpMux = true</span>

<span class="hljs-comment"># tls</span>
<span class="hljs-attr">tls.force</span> = <span class="hljs-literal">true</span>


<span class="hljs-comment"># If you want to support virtual host, you must set the http port for listening (optional)</span>
<span class="hljs-comment"># <span class="hljs-doctag">Note:</span> http port and https port can be same with bindPort</span>
<span class="hljs-attr">vhostHTTPPort</span> = <span class="hljs-number">43200</span>
<span class="hljs-attr">vhostHTTPSPort</span> = <span class="hljs-number">43433</span>

<span class="hljs-comment"># admin</span>
<span class="hljs-attr">webServer.addr</span> = <span class="hljs-string">&quot;0.0.0.0&quot;</span>
<span class="hljs-attr">webServer.port</span> = <span class="hljs-number">43100</span>
<span class="hljs-attr">webServer.user</span> = <span class="hljs-string">&quot;admin&quot;</span>
<span class="hljs-attr">webServer.password</span> = <span class="hljs-string">&quot;admin123&quot;</span>


<span class="hljs-comment"># log config</span>
<span class="hljs-comment"># log.to = &quot;./frps.log&quot;</span>
<span class="hljs-comment"># trace, debug, info, warn, error</span>
<span class="hljs-attr">log.level</span> = <span class="hljs-string">&quot;info&quot;</span>
<span class="hljs-attr">log.maxDays</span> = <span class="hljs-number">3</span>
<span class="hljs-attr">log.disablePrintColor</span> = <span class="hljs-literal">false</span>
<span class="hljs-attr">detailedErrorsToClient</span> = <span class="hljs-literal">true</span>


<span class="hljs-comment"># auth</span>
<span class="hljs-attr">auth.method</span> = <span class="hljs-string">&quot;token&quot;</span>
<span class="hljs-attr">auth.token</span> = <span class="hljs-string">&quot;bobo&quot;</span>
<span class="hljs-comment"># allowPorts =</span>
<span class="hljs-attr">maxPortsPerClient</span> = <span class="hljs-number">0</span>
</code></pre><h4 id="å®¢æˆ·ç«¯"><a href="#å®¢æˆ·ç«¯" class="headerlink" title="å®¢æˆ·ç«¯"></a>å®¢æˆ·ç«¯</h4><p>frpc.toml</p><pre><code class="hljs toml"><span class="hljs-comment"># frpc client config</span>
<span class="hljs-attr">user</span> = <span class="hljs-string">&quot;WF&quot;</span>
<span class="hljs-attr">serverAddr</span> = <span class="hljs-string">&quot;ifrp.club&quot;</span>
<span class="hljs-attr">serverPort</span> = <span class="hljs-number">7000</span>
<span class="hljs-attr">loginFailExit</span> = <span class="hljs-literal">false</span>

<span class="hljs-comment"># log config</span>
<span class="hljs-comment"># log.to = &quot;./frpc.log&quot;</span>
<span class="hljs-attr">log.level</span> = <span class="hljs-string">&quot;info&quot;</span>
<span class="hljs-attr">log.maxDays</span> = <span class="hljs-number">3</span>
<span class="hljs-attr">log.disablePrintColor</span> = <span class="hljs-literal">false</span>

<span class="hljs-attr">auth.method</span> = <span class="hljs-string">&quot;token&quot;</span>
<span class="hljs-comment"># auth token</span>
<span class="hljs-attr">auth.token</span> = <span class="hljs-string">&quot;123456789&quot;</span>

<span class="hljs-comment"># Set admin address for control frpc&#x27;s action by http api such as reload</span>
<span class="hljs-attr">webServer.addr</span> = <span class="hljs-string">&quot;0.0.0.0&quot;</span>
<span class="hljs-attr">webServer.port</span> = <span class="hljs-number">7400</span>
<span class="hljs-attr">webServer.user</span> = <span class="hljs-string">&quot;admin&quot;</span>
<span class="hljs-attr">webServer.password</span> = <span class="hljs-string">&quot;admin&quot;</span>

<span class="hljs-comment"># tcp Mux</span>
<span class="hljs-comment"># transport.tcpMux = true</span>
<span class="hljs-attr">transport.protocol</span> = <span class="hljs-string">&quot;tcp&quot;</span>

<span class="hljs-comment"># tls</span>
<span class="hljs-attr">transport.tls.enable</span> = <span class="hljs-literal">true</span>

<span class="hljs-comment"># Proxy</span>
<span class="hljs-comment"># transport.proxyURL = &quot;http://user:passwd@192.168.1.128:8080&quot;</span>
<span class="hljs-comment"># transport.proxyURL = &quot;socks5://user:passwd@192.168.1.128:1080&quot;</span>
<span class="hljs-comment"># transport.proxyURL = &quot;ntlm://user:passwd@192.168.1.128:2080&quot;</span>


<span class="hljs-comment"># dns</span>
<span class="hljs-attr">dnsServer</span> = <span class="hljs-string">&quot;223.5.5.5&quot;</span>


<span class="hljs-section">[[proxies]]</span>
<span class="hljs-attr">name</span> = <span class="hljs-string">&quot;ssh&quot;</span>
<span class="hljs-attr">type</span> = <span class="hljs-string">&quot;tcp&quot;</span>
<span class="hljs-attr">localIP</span> = <span class="hljs-string">&quot;127.0.0.1&quot;</span>
<span class="hljs-attr">localPort</span> = <span class="hljs-number">22</span>
<span class="hljs-attr">transport.useEncryption</span> = <span class="hljs-literal">false</span>
<span class="hljs-attr">transport.useCompression</span> = <span class="hljs-literal">false</span>
<span class="hljs-attr">remotePort</span> = <span class="hljs-number">22220</span>

<span class="hljs-section">[[proxies]]</span>
<span class="hljs-attr">name</span> = <span class="hljs-string">&quot;file&quot;</span>
<span class="hljs-attr">type</span> = <span class="hljs-string">&quot;tcp&quot;</span>
<span class="hljs-attr">localIP</span> = <span class="hljs-string">&quot;127.0.0.1&quot;</span>
<span class="hljs-attr">localPort</span> = <span class="hljs-number">5244</span>
<span class="hljs-attr">transport.useEncryption</span> = <span class="hljs-literal">false</span>
<span class="hljs-attr">transport.useCompression</span> = <span class="hljs-literal">false</span>
<span class="hljs-attr">remotePort</span> = <span class="hljs-number">22225</span>

<span class="hljs-comment"># socks5 proxy</span>
<span class="hljs-section">[[proxies]]</span>
<span class="hljs-attr">name</span> = <span class="hljs-string">&quot;plugin_socks5&quot;</span>
<span class="hljs-attr">type</span> = <span class="hljs-string">&quot;tcp&quot;</span>
<span class="hljs-attr">remotePort</span> = <span class="hljs-number">22228</span>
<span class="hljs-section">[proxies.plugin]</span>
<span class="hljs-attr">type</span> = <span class="hljs-string">&quot;socks5&quot;</span>
<span class="hljs-attr">username</span> = <span class="hljs-string">&quot;root&quot;</span>
<span class="hljs-attr">password</span> = <span class="hljs-string">&quot;lovehyy9420&quot;</span>

<span class="hljs-comment"># file</span>
<span class="hljs-section">[[proxies]]</span>
<span class="hljs-attr">name</span> = <span class="hljs-string">&quot;plugin_static_file&quot;</span>
<span class="hljs-attr">type</span> = <span class="hljs-string">&quot;tcp&quot;</span>
<span class="hljs-attr">remotePort</span> = <span class="hljs-number">22230</span>
<span class="hljs-section">[proxies.plugin]</span>
<span class="hljs-attr">type</span> = <span class="hljs-string">&quot;static_file&quot;</span>
<span class="hljs-attr">localPath</span> = <span class="hljs-string">&quot;/mnt/disk/downloads&quot;</span>
<span class="hljs-attr">stripPrefix</span> = <span class="hljs-string">&quot;static&quot;</span>
<span class="hljs-attr">httpUser</span> = <span class="hljs-string">&quot;&quot;</span>
<span class="hljs-attr">httpPassword</span> = <span class="hljs-string">&quot;&quot;</span></code></pre><h3 id="é…ç½®ä»£ç†-configure-proxy"><a href="#é…ç½®ä»£ç†-configure-proxy" class="headerlink" title="é…ç½®ä»£ç† configure proxy"></a>é…ç½®ä»£ç† configure proxy</h3><p>åœ¨ <code>.bash</code> æˆ– <code>.zshrc</code> é…ç½® alias:</p><pre><code class="hljs shell">alias setproxy=&quot;export ALL_PROXY=socks5://127.0.0.1:20180&quot;
alias unsetproxy=&quot;unset ALL_PROXY&quot;
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">proxy</span>
export HTTP_PROXY=http://127.0.0.1:10809
export HTTPS_PROXY=http://127.0.0.1:10809
export ALL_PROXY=http://127.0.0.1:10809</code></pre><p>configure apt:</p><pre><code class="hljs shell">vim /etc/apt/apt.conf.d/proxy.conf
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">write as below</span>
Acquire::http::Proxy &quot;http://&lt;proxy-server-ip&gt;:port/&quot;;
Acquire::https::Proxy &quot;http://&lt;proxy-server-ip&gt;:port/&quot;;</code></pre><h2 id="Shell-ç›¸å…³"><a href="#Shell-ç›¸å…³" class="headerlink" title="Shell ç›¸å…³"></a>Shell ç›¸å…³</h2><h3 id="SSH-é“¾æ¥è¶…æ—¶è®¾ç½®"><a href="#SSH-é“¾æ¥è¶…æ—¶è®¾ç½®" class="headerlink" title="SSH é“¾æ¥è¶…æ—¶è®¾ç½®"></a>SSH é“¾æ¥è¶…æ—¶è®¾ç½®</h3><p>ä¿®æ”¹ server ç«¯çš„ <code>/etc/ssh/sshd_config</code></p><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">serveræ¯éš”60ç§’å‘é€ä¸€æ¬¡è¯·æ±‚ç»™client,ç„¶åclientå“åº”,ä»è€Œä¿æŒè¿æ¥</span>
ClientAliveInterval 60
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">serverå‘å‡ºè¯·æ±‚å,å®¢æˆ·ç«¯æ²¡æœ‰å“åº”å¾—æ¬¡æ•°è¾¾åˆ°3,å°±è‡ªåŠ¨æ–­å¼€è¿æ¥,æ­£å¸¸æƒ…å†µä¸‹,clientä¸ä¼šä¸å“åº”</span>
ClientAliveCountMax 3</code></pre><h3 id="SSH-é…ç½®å¯†é’¥ç™»é™†"><a href="#SSH-é…ç½®å¯†é’¥ç™»é™†" class="headerlink" title="SSH é…ç½®å¯†é’¥ç™»é™†"></a>SSH é…ç½®å¯†é’¥ç™»é™†</h3><p>å®¢æˆ·ç«¯è¿è¡Œ</p><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">WAY1</span>
ssh-copy-id username@remote_host
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">WAY2</span>
mkdir -p ~/.ssh
cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">WAY3</span>
scp ./file root@192.168.1.1:/path_on_host/</code></pre><p>ç¼–è¾‘ <code>/etc/ssh/sshd_config</code> æ–‡ä»¶,è¿›è¡Œå¦‚ä¸‹è®¾ç½®:</p><pre><code class="hljs shell">RSAAuthentication yes
PubkeyAuthentication yes</code></pre><p>é‡å¯ ssh æœåŠ¡:</p><pre><code class="hljs shell">service sshd restart</code></pre><h3 id="æ¸…é™¤-ssh-æ‰€æœ‰ç™»å½•æ—¥å¿—"><a href="#æ¸…é™¤-ssh-æ‰€æœ‰ç™»å½•æ—¥å¿—" class="headerlink" title="æ¸…é™¤ ssh æ‰€æœ‰ç™»å½•æ—¥å¿—"></a>æ¸…é™¤ ssh æ‰€æœ‰ç™»å½•æ—¥å¿—</h3><p>é€‚ç”¨äº Debian ç³»å’Œ Centos ç³»ç­‰å‘è¡Œç‰ˆ.</p><pre><code class="hljs shell">echo &gt; /var/log/wtmp
echo &gt; /var/log/btmp
<span class="hljs-meta prompt_">echo&gt;</span><span class="language-bash">/var/log/lastlog</span>
echo &gt; /var/log/secure
echo &gt; /var/log/messages
<span class="hljs-meta prompt_">echo&gt; </span><span class="language-bash">/var/log/syslog</span>
<span class="hljs-meta prompt_">echo&gt; </span><span class="language-bash">/var/log/xferlog</span>
<span class="hljs-meta prompt_">echo&gt; </span><span class="language-bash">/var/log/auth.log</span>
<span class="hljs-meta prompt_">echo&gt; </span><span class="language-bash">/var/log/user.log</span>
cat /dev/null &gt; /var/adm/sylog
cat /dev/null &gt; /var/log/maillog
cat /dev/null &gt; /var/log/openwebmail.log
cat /dev/null &gt; /var/log/mail.info
<span class="hljs-meta prompt_">echo&gt;</span><span class="language-bash">/var/run/utmp</span>
echo &gt; .bash_history
history -cw</code></pre><h3 id="ZSH-ç»ˆç«¯ç¾åŒ–"><a href="#ZSH-ç»ˆç«¯ç¾åŒ–" class="headerlink" title="ZSH ç»ˆç«¯ç¾åŒ–"></a>ZSH ç»ˆç«¯ç¾åŒ–</h3><p>å®‰è£…</p><pre><code class="hljs shell">cd ~
sudo apt-get install git zsh wget -y
sh -c &quot;$(wget -O- https://gitee.com/mirrors/oh-my-zsh/raw/master/tools/install.sh)&quot;
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">ä»é©¬äº‘å®‰è£…</span>
export REMOTE=https://gitee.com/mirrors/oh-my-zsh.git
sh -c &quot;$(curl -fsSL https://gitee.com/mirrors/oh-my-zsh/raw/master/tools/install.sh)&quot;
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">åŸGithubå®‰è£…</span>
sh -c &quot;$(wget -O- https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)&quot;
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">è§£å†³ OpenWRT git å¼‚å¸¸</span>
opkg update
opkg remove git
opkg install git-http
opkg install ca-bundle
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">è§£å†³æ”¶æ‰‹æœºå­—ä½“é—®é¢˜</span>
sudo apt-get install fonts-powerline
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">å®‰è£…æ’ä»¶</span>
cd ~/.oh-my-zsh/plugins
git clone https://github.com/zsh-users/zsh-syntax-highlighting.git
git clone https://github.com/zsh-users/zsh-autosuggestions.git
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">ç¼–è¾‘é…ç½®</span>
vim ~/.zshrc
ZSH_THEME=&quot;agnoster&quot; or &quot;ys&quot;
plugins=(git zsh-syntax-highlighting zsh-autosuggestions sudo)
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">åˆ·æ–°</span>
source ~/.zshrc
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">è®¾ç½® ZSH ä¸ºé»˜è®¤ shell</span>
cat /etc/shells
chsh -s /bin/zsh
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">OpenWRT è®¾ç½® ZSH ä¸ºé»˜è®¤ shell</span>
which zsh &amp;&amp; sed -i -- &#x27;s:/bin/ash:&#x27;`which zsh`&#x27;:g&#x27; /etc/passwd
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">è¿ç§»åˆ°å…¶ä»–ç”¨æˆ·</span>
cd ~
cp .oh-my-zsh /home/wf/.oh-my-zsh -r
cp .zshrc /home/wf/.zshrc
cp .vimrc /home/wf/.vimrc
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">ä¿®å¤æƒé™</span>
sudo chown -R wf /home/wf/.oh-my-zsh
compaudit | xargs chmod g-w,o-w
</code></pre><h3 id="SSH-è®¾ç½®å¯†é’¥ç™»é™†å¹¶æ·»åŠ -hacker-account"><a href="#SSH-è®¾ç½®å¯†é’¥ç™»é™†å¹¶æ·»åŠ -hacker-account" class="headerlink" title="SSH è®¾ç½®å¯†é’¥ç™»é™†å¹¶æ·»åŠ  hacker account"></a>SSH è®¾ç½®å¯†é’¥ç™»é™†å¹¶æ·»åŠ  hacker account</h3><p>ç”¨äºä¸€é”®ä¸‹æ¯’è¿œæ§.</p><pre><code class="hljs shell">curl -sSL https://raw.githubusercontent.com/WhaleFell/TGBot/main/exc.sh | sudo /bin/bash</code></pre><h3 id="ä½¿ç”¨-SCP-secure-copy-å‘½ä»¤ä¼ è¾“æ–‡ä»¶"><a href="#ä½¿ç”¨-SCP-secure-copy-å‘½ä»¤ä¼ è¾“æ–‡ä»¶" class="headerlink" title="ä½¿ç”¨ SCP(secure copy) å‘½ä»¤ä¼ è¾“æ–‡ä»¶"></a>ä½¿ç”¨ SCP(secure copy) å‘½ä»¤ä¼ è¾“æ–‡ä»¶</h3><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">from <span class="hljs-built_in">local</span> to remote</span>
scp -C local_file remote_username@remote_ip:remote_file
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">from remote to <span class="hljs-built_in">local</span></span>
scp -C remote_username@remote_ip:remote_file local_file
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">tranfer directory</span>
scp -C -r local_dir remote_username@remote_ip:remote_dir</code></pre><h2 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h2><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>å›½å†…åŠ é€Ÿ: <a target="_blank" rel="noopener" href="https://get.daocloud.io/">https://get.daocloud.io/</a></p><p>å®˜æ–¹å‘½ä»¤å®‰è£…:</p><pre><code class="hljs shell">curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh</code></pre><h3 id="Useful-Command"><a href="#Useful-Command" class="headerlink" title="Useful Command"></a>Useful Command</h3><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">å¼ºåˆ¶åœæ­¢å¹¶åˆ é™¤é•œåƒ</span>
docker rm -f åç§°
<span class="hljs-meta prompt_"># </span><span class="language-bash">entry shell and <span class="hljs-built_in">rm</span></span>
docker run -it --rm --name tgbot /bin/sh
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">å¤åˆ¶æ–‡ä»¶ copy file</span>
docker cp ./TGBot.session tgbot:/wkdir/
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">run container</span>
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">temporary run</span>
docker run -it --rm --name container-name \
-v /wfwork/tgbot_base/:/wkdir/ \
tgbot_base /bin/sh
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">run as daemon</span>
docker run -d --name container-name \
-v /wfwork/tgbot_base/:/wkdir/ \
tgbot_base python3 main.py</code></pre><h3 id="å¼€å¯-IPV6"><a href="#å¼€å¯-IPV6" class="headerlink" title="å¼€å¯ IPV6"></a>å¼€å¯ IPV6</h3><p><a target="_blank" rel="noopener" href="https://blog.laoda.de/archives/docker-qbittorrent-ipv6/index.html">ã€æœ‰ç”¨çš„å°çŸ¥è¯†ã€‘Docker-qBittorrent å¼€å¯ IPv6 ç¬”è®° | æˆ‘ä¸æ˜¯å’•å’•é¸½</a></p><p>ç¼–è¾‘ Â <code>/etc/docker/daemon.json</code>Â ,æ·»åŠ ä»¥ä¸‹å†…å®¹:(å¦‚æœæ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ç›´æ¥åˆ›å»º)</p><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span>
 <span class="hljs-attr">&quot;ipv6&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
 <span class="hljs-attr">&quot;fixed-cidr-v6&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2001:db8:abc1::/64&quot;</span><span class="hljs-punctuation">,</span>  # IPv6å‰ç¼€å¯ä»¥è‡ªå®šä¹‰<span class="hljs-punctuation">,</span>è¯·ç¡®ä¿ç¬¦åˆè§„åˆ™
 <span class="hljs-attr">&quot;experimental&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
 <span class="hljs-attr">&quot;ip6tables&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
<span class="hljs-punctuation">&#125;</span></code></pre><p>é‡å¯:</p><pre><code class="hljs shell">systemctl restart docker</code></pre><h3 id="æ¸…é™¤-docker-build-cache"><a href="#æ¸…é™¤-docker-build-cache" class="headerlink" title="æ¸…é™¤ docker build cache"></a>æ¸…é™¤ docker build cache</h3><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">show cache</span>
docker system df
<span class="hljs-meta prompt_"># </span><span class="language-bash">prune: remove all stopped containers, all dangling images, and all unused networks</span>
docker system prune -a --force</code></pre><h3 id="Image-å„ç§é•œåƒ"><a href="#Image-å„ç§é•œåƒ" class="headerlink" title="Image å„ç§é•œåƒ"></a>Image å„ç§é•œåƒ</h3><h4 id="Portainer-ç®¡ç†-UI"><a href="#Portainer-ç®¡ç†-UI" class="headerlink" title="Portainer ç®¡ç† UI"></a>Portainer ç®¡ç† UI</h4><pre><code class="hljs shell">docker run -d -p 9000:9000 \
--name portainer \
--restart=always \
-v /var/run/docker.sock:/var/run/docker.sock \
portainer/portainer:latest</code></pre><h4 id="Frps-æœåŠ¡ç«¯"><a href="#Frps-æœåŠ¡ç«¯" class="headerlink" title="Frps æœåŠ¡ç«¯"></a>Frps æœåŠ¡ç«¯</h4><pre><code class="hljs shell">docker run --restart=always --network host -d \
-v /etc/frp/frps.ini:/etc/frp/frps.ini \
--name frps snowdreamtech/frps</code></pre><p>frps.ini</p><pre><code class="hljs ini"><span class="hljs-section">[common]</span>
<span class="hljs-attr">bind_addr</span> = <span class="hljs-number">0.0</span>.<span class="hljs-number">0.0</span>
<span class="hljs-attr">bind_port</span> = <span class="hljs-number">37700</span>
<span class="hljs-attr">bind_udp_port</span> = <span class="hljs-number">37711</span>

<span class="hljs-attr">token</span> = lovecyx

<span class="hljs-attr">dashboard_port</span> = <span class="hljs-number">37710</span>
<span class="hljs-attr">dashboard_user</span> = admin
<span class="hljs-attr">dashboard_pwd</span> = lovehyy

<span class="hljs-attr">max_pool_count</span> = <span class="hljs-number">9999</span>
<span class="hljs-attr">max_ports_per_client</span> = <span class="hljs-number">0</span>

<span class="hljs-attr">tls_only</span> = <span class="hljs-literal">true</span>
<span class="hljs-attr">allow_ports</span> = <span class="hljs-number">30000</span>-<span class="hljs-number">50000</span></code></pre><h4 id="Frpc-å®¢æˆ·ç«¯"><a href="#Frpc-å®¢æˆ·ç«¯" class="headerlink" title="Frpc å®¢æˆ·ç«¯"></a>Frpc å®¢æˆ·ç«¯</h4><p><a target="_blank" rel="noopener" href="https://www.itcoder.tech/posts/docker-frp/">docker frpc ä¸­æ–‡æ–‡æ¡£</a></p><pre><code class="hljs shell">docker run --network host -d \
-v /root/frpc/frpc.ini:/etc/frp/frpc.ini \
--name frpc \
--restart=always \
snowdreamtech/frpc</code></pre><h4 id="åˆ°æœåŠ¡å™¨çš„ç½‘é€Ÿæµ‹è¯•"><a href="#åˆ°æœåŠ¡å™¨çš„ç½‘é€Ÿæµ‹è¯•" class="headerlink" title="åˆ°æœåŠ¡å™¨çš„ç½‘é€Ÿæµ‹è¯•"></a>åˆ°æœåŠ¡å™¨çš„ç½‘é€Ÿæµ‹è¯•</h4><ol><li>ä½¿ç”¨ html5-speedtest <a target="_blank" rel="noopener" href="https://hub.docker.com/r/ilemonrain/html5-speedtest/">Docker</a></li></ol><pre><code class="hljs shell">sudo docker run --restart=always \
--name openspeedtest \
-d -p 6688:80 ilemonrain/html5-speedtest</code></pre><ol><li>ä½¿ç”¨ HomeBox <a target="_blank" rel="noopener" href="https://github.com/XGHeaven/homebox">GitHub - XGHeaven&#x2F;homebox: A Toolbox for Home Local Networks</a></li></ol><pre><code class="hljs shell">docker run -d -p 3300:3300 --name homebox xgheaven/homebox</code></pre><h4 id="FileBrowser-æ–‡ä»¶ç®¡ç†"><a href="#FileBrowser-æ–‡ä»¶ç®¡ç†" class="headerlink" title="FileBrowser æ–‡ä»¶ç®¡ç†"></a>FileBrowser æ–‡ä»¶ç®¡ç†</h4><p><a target="_blank" rel="noopener" href="https://filebrowser.org/installation">https://filebrowser.org/installation</a></p><pre><code class="hljs sh">docker run \
    -v /mnt/:/srv \
    -v /root/filebrowser.db:/database.db \
    -v /path/.filebrowser.json:/.filebrowser.json \
    -u $(<span class="hljs-built_in">id</span> -u):$(<span class="hljs-built_in">id</span> -g) \
    -p 8080:80 \
    filebrowser/filebrowser</code></pre><h4 id="NFS-æ–‡ä»¶å…±äº«"><a href="#NFS-æ–‡ä»¶å…±äº«" class="headerlink" title="NFS æ–‡ä»¶å…±äº«"></a>NFS æ–‡ä»¶å…±äº«</h4><blockquote><p><strong>NFS</strong>,æ˜¯ <strong>Network File System</strong> çš„ç®€å†™,å³ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿ.ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿæ˜¯ FreeBSD æ”¯æŒçš„æ–‡ä»¶ç³»ç»Ÿä¸­çš„ä¸€ç§,ä¹Ÿè¢«ç§°ä¸º NFS. NFS å…è®¸ä¸€ä¸ªç³»ç»Ÿåœ¨ç½‘ç»œä¸Šä¸ä»–äººå…±äº«ç›®å½•å’Œæ–‡ä»¶. é€šè¿‡ä½¿ç”¨ NFS,ç”¨æˆ·å’Œç¨‹åºå¯ä»¥åƒè®¿é—®æœ¬åœ°æ–‡ä»¶ä¸€æ ·è®¿é—®è¿œç«¯ç³»ç»Ÿä¸Šçš„æ–‡ä»¶.</p></blockquote><p>docker hub:<a target="_blank" rel="noopener" href="https://hub.docker.com/r/erichough/nfs-server/">https://hub.docker.com/r/erichough/nfs-server/</a></p><pre><code class="hljs shell">docker pull erichough/nfs-server
docker run                                            \
  -v /root/:/file/  \
  -e NFS_EXPORT_0=&#x27;/file *(rw,no_subtree_check,async)&#x27;        \
  -e NFS_SERVER_THREAD_COUNT=4 \
  --privileged                               \
  --network host \
  --name=nfs-server \
  erichough/nfs-server</code></pre><blockquote><p>åœ¨ UNIX å’Œç±» UNIX ç³»ç»Ÿä¸­,&#x2F;etc&#x2F;exports æ˜¯ä¸€ä¸ªé…ç½®æ–‡ä»¶,ç”¨äºæŒ‡å®šå¯ä»¥é€šè¿‡ NFS å…±äº«çš„æ–‡ä»¶ç³»ç»Ÿå’Œç›¸å…³å‚æ•°.è¯¥æ–‡ä»¶å®šä¹‰äº†æœåŠ¡å™¨ä¸Šå¯ä¾›å®¢æˆ·ç«¯æŒ‚è½½çš„å…±äº«ç›®å½•ä»¥åŠè®¿é—®æƒé™.ä»¥ä¸‹æ˜¯&#x2F;etc&#x2F;exports æ–‡ä»¶çš„ä¸€èˆ¬æ ¼å¼å’Œä½œç”¨:</p><p>æ¯ä¸€è¡Œä»£è¡¨ä¸€ä¸ªå…±äº«ç›®å½•çš„å®šä¹‰,å…·æœ‰ä»¥ä¸‹åŸºæœ¬æ ¼å¼:</p><pre><code class="hljs plaintext">&lt;ç›®å½•è·¯å¾„&gt; &lt;å…è®¸è®¿é—®çš„å®¢æˆ·ç«¯&gt;(é€‰é¡¹)</code></pre><ul><li><p>â€‹<code>&lt;ç›®å½•è·¯å¾„&gt;</code>â€‹:æŒ‡å®šè¦å…±äº«çš„ç›®å½•çš„è·¯å¾„.å¯ä»¥æ˜¯ç»å¯¹è·¯å¾„æˆ–ç›¸å¯¹è·¯å¾„.</p></li><li><p>â€‹<code>&lt;å…è®¸è®¿é—®çš„å®¢æˆ·ç«¯&gt;</code>â€‹:æŒ‡å®šè¢«å…è®¸è®¿é—®è¯¥å…±äº«ç›®å½•çš„å®¢æˆ·ç«¯.å¯ä»¥ä½¿ç”¨ IP åœ°å€ã€åŸŸåæˆ–å­ç½‘æ©ç æ¥æŒ‡å®š.ä¹Ÿå¯ä»¥ä½¿ç”¨é€šé…ç¬¦è¿›è¡Œæ¨¡å¼åŒ¹é…,å¦‚ <code>*</code>â€‹ è¡¨ç¤ºå…è®¸æ‰€æœ‰å®¢æˆ·ç«¯è®¿é—®.</p></li><li><p>â€‹<code>(é€‰é¡¹)</code>â€‹:å¯é€‰é¡¹,ç”¨äºæŒ‡å®šå…±äº«é€‰é¡¹.å¸¸ç”¨çš„é€‰é¡¹åŒ…æ‹¬:</p><ul><li>â€‹<code>rw</code>â€‹:å…è®¸è¯»å†™è®¿é—®æƒé™.</li><li>â€‹<code>ro</code>â€‹:åªå…è®¸è¯»å–è®¿é—®æƒé™.</li><li>â€‹<code>noaccess</code>â€‹:ç¦æ­¢è®¿é—®è¯¥å…±äº«ç›®å½•.</li><li>â€‹<code>root_squash</code>â€‹:å°†å®¢æˆ·ç«¯çš„ root ç”¨æˆ·æ˜ å°„ä¸ºåŒ¿åç”¨æˆ·(é€šå¸¸æ˜¯ nfsnobody),ä»¥å¢åŠ å®‰å…¨æ€§.</li><li>â€‹<code>all_squash</code>â€‹:å°†æ‰€æœ‰ç”¨æˆ·æ˜ å°„ä¸ºåŒ¿åç”¨æˆ·,ç”¨äºå¢åŠ å®‰å…¨æ€§.</li><li>â€‹<code>async</code>â€‹:å¼‚æ­¥å†™å…¥,æé«˜æ€§èƒ½ä½†é™ä½å¯é æ€§.</li><li>â€‹<code>sync</code>â€‹:åŒæ­¥å†™å…¥,ç¡®ä¿æ•°æ®çš„å¯é æ€§ä½†æ€§èƒ½è¾ƒä½.</li><li>â€‹<code>insecure</code>â€‹:å…è®¸ä¸å®‰å…¨çš„è®¿é—®è¯·æ±‚,å¦‚éç‰¹æƒç«¯å£.</li><li>â€‹<code>no_subtree_check</code>â€‹:ä¸è¿›è¡Œå­æ ‘æ£€æŸ¥.</li></ul></li></ul><p>&#x2F;etc&#x2F;exports æ–‡ä»¶çš„ä½œç”¨æ˜¯å®šä¹‰ NFS å…±äº«çš„é…ç½®ä¿¡æ¯,ä»¥ä¾¿æœåŠ¡å™¨å°†æŒ‡å®šçš„ç›®å½•å’Œé€‰é¡¹æä¾›ç»™å®¢æˆ·ç«¯è¿›è¡ŒæŒ‚è½½å’Œè®¿é—®.æ¯å½“ä¿®æ”¹ &#x2F;etc&#x2F;exports æ–‡ä»¶å,éœ€è¦ä½¿ç”¨ <code>exportfs</code>â€‹ å‘½ä»¤é‡æ–°åŠ è½½ NFS æœåŠ¡å™¨çš„é…ç½®,ä»¥ä½¿æ›´æ”¹ç”Ÿæ•ˆ.</p></blockquote><p>ä»…é€šè¿‡ NFSv4 è¿æ¥,åˆ™åªéœ€ä½¿ç”¨ TCP ç«¯å£ <code>2049</code>â€‹</p><p>performance-tuning:<a target="_blank" rel="noopener" href="https://github.com/ehough/docker-nfs-server/blob/develop/doc/advanced/performance-tuning.md">https://github.com/ehough/docker-nfs-server/blob/develop/doc/advanced/performance-tuning.md</a></p><p>Set the **<code>NFS_SERVER_THREAD_COUNT</code>**â€‹ environment variable to control how many server threads <code>rpc.nfsd</code>â€‹ will use. A good minimum is one thread per CPU core, but 4 or 8 threads per core is probably better. The default is one thread per CPU core.</p><p>Running the container with <code>--network host</code>â€‹ <em>might</em> improve network performance by 10% - 20% on a heavily-loaded server [<a target="_blank" rel="noopener" href="https://jtway.co/docker-network-performance-b95bce32b4b9">1</a>,<a target="_blank" rel="noopener" href="https://www.percona.com/blog/2016/08/03/testing-docker-multi-host-network-performance/">2</a>], <strong>though this hasnâ€™t been tested.</strong></p><p>æŸ¥çœ‹ CPU å†…æ ¸æ•°:<code>cat /proc/cpuinfo| grep &quot;cpu cores&quot;| uniq</code>â€‹</p><p>é—®é¢˜:the problem is in the docker-machine. If you want to use nfs mounts you need to run modprobe nfs in the machine itself, not in container. Container uses kernel of the machine. Same with modprobe nfs and nfs server.é—®é¢˜å‡ºåœ¨ç å¤´å·¥äººæœºå™¨ä¸Š.å¦‚æœä½ æƒ³ä½¿ç”¨ nfs æŒ‚è½½,ä½ éœ€è¦åœ¨æœºå™¨æœ¬èº«è€Œä¸æ˜¯å®¹å™¨ä¸­è¿è¡Œ modprobe nfs.å®¹å™¨ä½¿ç”¨æœºå™¨çš„å†…æ ¸.ä¸ modprobe nfs å’Œ nfs æœåŠ¡å™¨ç›¸åŒ.</p><p>åœ¨ Windows ä¸Šé…ç½® NFS å®¢æˆ·ç«¯: <a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1840455">https://cloud.tencent.com/developer/article/1840455</a></p><h4 id="DDNS-GO"><a href="#DDNS-GO" class="headerlink" title="DDNS-GO"></a>DDNS-GO</h4><p>åŸºäº Golang è¯­è¨€å¼€å‘çš„ DDNS ç¨‹åº.<a target="_blank" rel="noopener" href="https://github.com/jeessy2/ddns-go">GitHub - jeessy2&#x2F;ddns-go: ç®€å•å¥½ç”¨çš„ DDNS.è‡ªåŠ¨æ›´æ–°åŸŸåè§£æåˆ°å…¬ç½‘ IP(æ”¯æŒé˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€Dnspodã€Cloudflareã€Callbackã€åä¸ºäº‘ã€ç™¾åº¦äº‘ã€Porkbunã€GoDaddyã€Google Domain)</a></p><pre><code class="hljs shell">docker run -d --name ddns-go --restart=always --net=host -v /root/configs/ddns-go:/root jeessy/ddns-go</code></pre><h4 id="AdGuardHome-DNS"><a href="#AdGuardHome-DNS" class="headerlink" title="AdGuardHome DNS"></a>AdGuardHome DNS</h4><p><a target="_blank" rel="noopener" href="https://github.com/AdguardTeam/AdGuardHome/wiki/Docker">Docker Â· AdguardTeam&#x2F;AdGuardHome Wiki Â· GitHub</a></p><pre><code class="hljs shell"></code></pre><h4 id="SmartDNS"><a href="#SmartDNS" class="headerlink" title="SmartDNS"></a>SmartDNS</h4><p><a target="_blank" rel="noopener" href="https://pymumu.github.io/smartdns/">SmartDNS</a></p><p>å›½å†…ç”¨ UDP DNS å›½å¤–ç”¨ https tls çš„ DNS</p><pre><code class="hljs shell">server 223.5.5.5 -bootstrap-dns
server 114.114.114.114
server 202.96.128.166:53
server-https https://dns.google/dns-query
server-https https://1.1.1.1/dns-query</code></pre><p>ä¿®æ”¹æœ¬æœº DNS:</p><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">ç¼–è¾‘ å¹¶å…³é—­ç›‘å¬</span>
vim /etc/systemd/resolved.conf</code></pre><h4 id="QBittorent-ç§å­ä¸‹è½½"><a href="#QBittorent-ç§å­ä¸‹è½½" class="headerlink" title="QBittorent ç§å­ä¸‹è½½"></a>QBittorent ç§å­ä¸‹è½½</h4><p><a target="_blank" rel="noopener" href="https://github.com/SuperNG6/Docker-qBittorrent-Enhanced-Edition">GitHub - SuperNG6&#x2F;Docker-qBittorrent-Enhanced-Edition: Docker-qBittorrent-Enhanced-Edition</a></p><p>å› ä¸ºæ¶‰åŠå¤§é‡ UDP ä¹‹ç±»çš„é“¾æ¥,è¯·ä½¿ç”¨ host ç½‘ç»œ.ç”¨ <code>id</code> å‘½ä»¤ç¡®å®šç”¨æˆ· UID</p><pre><code class="hljs shell">docker run  \
    --name=qbittorrentee  \
    -e WEBUIPORT=8600  \
    -e PUID=0 \
    -e PGID=0 \
    -e TZ=Asia/Shanghai \
    -v /root/configs/qb:/config  \
    -v /mnt/disk/downloads:/downloads  \
    --restart always  \
    --network host \
    superng6/qbittorrentee:latest</code></pre><p>æˆ–è€…ä¸ä½¿ç”¨ IPV6,åœ¨åæœŸè®¾ç½® IPV6<br>éœ€è¦æ”¹æˆ 51782 ç«¯å£,å› ä¸º 6881 ç«¯å£å·²ç»è¢«å°ç¦</p><pre><code class="hljs shell">docker create  \
    --name=qbittorrent  \
    -e WEBUIPORT=8600  \
    -e PUID=0 \
    -e PGID=0 \
    -e TZ=Asia/Shanghai \
    -p 51782:51782  \
    -p 51782:51782/udp  \
    -p 8600:8600  \
 -v /root/configs/qb:/config  \
    -v /mnt/disk/downloads:/downloads  \
    --restart always  \
 superng6/qbittorrentee:latest</code></pre><h4 id="Alist"><a href="#Alist" class="headerlink" title="Alist"></a>Alist</h4><p><a target="_blank" rel="noopener" href="https://alist.nn.ci/zh">Home | AList æ–‡æ¡£</a></p><pre><code class="hljs shell">docker pull xhofe/alist:latest

docker run -d \
--restart=always \
-v /root/configs/alist:/opt/alist/data \
-v /mnt/:/mnt/ \
-e PUID=0 \
-e PGID=0 \
-e UMASK=022 \
-e HTTP_PROXY=http://127.0.0.1:20181 \
-e HTTPS_PROXY=http://127.0.0.1:20181 \
--name=&quot;alist&quot; \
--network=host \
xhofe/alist:latest</code></pre><h4 id="Homarr-å¯¼èˆªé¡µ"><a href="#Homarr-å¯¼èˆªé¡µ" class="headerlink" title="Homarr å¯¼èˆªé¡µ"></a>Homarr å¯¼èˆªé¡µ</h4><p>Official Document: <a target="_blank" rel="noopener" href="https://homarr.dev/docs/about">ğŸ‘‹ Welcome to Homarr | Homarr Docs</a></p><pre><code class="hljs shell">docker run \
--name homarr \
--restart always \
-p 7575:7575 \
-v /var/run/docker.sock:/var/run/docker.sock \
-v /root/configs/homarr/configs:/app/data/configs \
-v /root/configs/homarr/data:/data \
-v /root/configs/homarr/icons:/app/public/icons \
-d ghcr.io/ajnart/homarr:latest</code></pre><p>å¦å¤–,å›½äº§çš„ flare ç‰¹åˆ«è½»é‡,åªä¸è¿‡è¦ç¼–å†™ yaml æ–‡ä»¶.</p><p><a target="_blank" rel="noopener" href="https://github.com/soulteary/docker-flare">GitHub - soulteary&#x2F;docker-flare: Flare âœ¨ Lightweight, high performance and fast self-hosted navigation pages, resource utilization rate is &lt;1% CPU, MEM &lt;30 M, Docker Image &lt; 10M</a></p><pre><code class="hljs shell">docker pull soulteary/flare

docker run -d -p 5005:5005 -v /root/configs/flare/:/app soulteary/flare</code></pre><h4 id="Aria2-ä¸‹è½½"><a href="#Aria2-ä¸‹è½½" class="headerlink" title="Aria2 ä¸‹è½½"></a>Aria2 ä¸‹è½½</h4><p>ä¸€ä¸ªç”¨ C++ ç¼–å†™çš„å…¨å¹³å°å…¨åè®®å…¼å®¹çš„ä¸‹è½½å™¨.</p><ol><li>æº aria2 é¡¹ç›®:<a target="_blank" rel="noopener" href="https://github.com/aria2/aria2">GitHub - aria2&#x2F;aria2: aria2 is a lightweight multi-protocol &amp; multi-source, cross platform download utility operated in command-line. It supports HTTP&#x2F;HTTPS, FTP, SFTP, BitTorrent and Metalink.</a></li><li>Docker Aria2 Pro Docker ä¼˜åŒ–ç‰ˆ: <a target="_blank" rel="noopener" href="https://p3terx.com/archives/docker-aria2-pro.html">Aria2 Pro - æ›´å¥½ç”¨çš„ Aria2 Docker å®¹å™¨é•œåƒ - P3TERX ZONE</a></li></ol><pre><code class="hljs shell">docker run -d \
--name aria2-pro \
--restart always \
--log-opt max-size=1m \
--network host \
-e PUID=$UID \
-e PGID=$GID \
-e RPC_SECRET=loveAlways \
-e RPC_PORT=6800 \
-e LISTEN_PORT=6888 \
-e DISK_CACHE=128M \
-v /root/config/aria2-config:/config \
-v /mnt/disk/downloads:/downloads \
p3terx/aria2-pro</code></pre><p>WebGUI AriaNG</p><pre><code class="hljs shell">docker run -d \
--name ariang \
--restart always \
--log-opt max-size=1m \
-p 6880:6880 \
p3terx/ariang</code></pre><h4 id="Mariadb-æ•°æ®åº“"><a href="#Mariadb-æ•°æ®åº“" class="headerlink" title="Mariadb æ•°æ®åº“"></a>Mariadb æ•°æ®åº“</h4><pre><code class="hljs console">docker run --name mariadb -d --restart=always \
-e MARIADB_ROOT_PASSWORD=lovehyy \
-e MARIADB_DATABASE=tgforward \
-v /wfwork/data/mariadb:/var/lib/mysql \
-p 3310:3306 \
mariadb:latest</code></pre><h2 id="V2ray-Xray-Server"><a href="#V2ray-Xray-Server" class="headerlink" title="V2ray &#x2F; Xray Server"></a>V2ray &#x2F; Xray Server</h2><p>ä¸€ä¸ª ä»£ç†å·¥å…·,æ¨èä½¿ç”¨ Xray å†…æ ¸.</p><ol><li><a target="_blank" rel="noopener" href="https://xtls.github.io/document/">Project X Official Docs</a></li></ol><h3 id="æ›´æ–°-geoip-dat-geosite-dat"><a href="#æ›´æ–°-geoip-dat-geosite-dat" class="headerlink" title="æ›´æ–° geoip.dat geosite.dat"></a>æ›´æ–° geoip.dat geosite.dat</h3><p><a target="_blank" rel="noopener" href="https://github.com/Loyalsoldier/v2ray-rules-dat">Loyalsoldier&#x2F;v2ray-rules-dat</a></p><pre><code class="hljs shell">wget https://github.com/Loyalsoldier/v2ray-rules-dat/releases/latest/download/geoip.dat
wget https://github.com/Loyalsoldier/v2ray-rules-dat/releases/latest/download/geosite.dat</code></pre><h2 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h2><p>docker running</p><p>TODO: è¿™è¾¹çš„ Docker éƒ¨ç½²è¿˜éœ€è¦ä¼˜åŒ–</p><pre><code class="hljs sh">docker run -d -p 8080:8080 \
--name nginx \
--restart=always \
-v /wfwork/nginx/conf/:/etc/nginx/ \
-v /wfwork/nginx/www:/usr/share/nginx/html \
-v /wfwork/nginx/cert:/usr/local/nginx/cert \
nginx:latest</code></pre><h3 id="è°ƒä¼˜-Performance-Tuning"><a href="#è°ƒä¼˜-Performance-Tuning" class="headerlink" title="è°ƒä¼˜ Performance Tuning"></a>è°ƒä¼˜ Performance Tuning</h3><p>åœ¨ server å­—æ®µä¸‹æ·»åŠ </p><pre><code class="hljs nginx"><span class="hljs-attribute">client_max_body_size</span> <span class="hljs-number">5G</span>;
<span class="hljs-attribute">client_header_timeout</span> <span class="hljs-number">1m</span>;
<span class="hljs-attribute">client_body_timeout</span> <span class="hljs-number">1m</span>;
<span class="hljs-attribute">proxy_connect_timeout</span> <span class="hljs-number">60s</span>;
<span class="hljs-attribute">proxy_read_timeout</span> <span class="hljs-number">1m</span>;
<span class="hljs-attribute">proxy_send_timeout</span> <span class="hljs-number">1m</span>;</code></pre><h3 id="åå‘ä»£ç†"><a href="#åå‘ä»£ç†" class="headerlink" title="åå‘ä»£ç†"></a>åå‘ä»£ç†</h3><pre><code class="hljs nginx"><span class="hljs-attribute">user</span>  nginx;
<span class="hljs-attribute">worker_processes</span>  auto;

<span class="hljs-attribute">error_log</span>  /var/log/nginx/<span class="hljs-literal">error</span>.log <span class="hljs-literal">notice</span>;
<span class="hljs-attribute">pid</span>        /var/run/nginx.pid;


<span class="hljs-section">events</span> &#123;
    <span class="hljs-attribute">worker_connections</span>  <span class="hljs-number">1024</span>;
&#125;


<span class="hljs-section">http</span> &#123;
    <span class="hljs-attribute">include</span>       /etc/nginx/mime.types;
    <span class="hljs-attribute">default_type</span>  application/octet-stream;

    <span class="hljs-attribute">log_format</span>  main  <span class="hljs-string">&#x27;<span class="hljs-variable">$remote_addr</span> - <span class="hljs-variable">$remote_user</span> [<span class="hljs-variable">$time_local</span>] &quot;<span class="hljs-variable">$request</span>&quot; &#x27;</span>
                      <span class="hljs-string">&#x27;<span class="hljs-variable">$status</span> <span class="hljs-variable">$body_bytes_sent</span> &quot;<span class="hljs-variable">$http_referer</span>&quot; &#x27;</span>
                      <span class="hljs-string">&#x27;&quot;<span class="hljs-variable">$http_user_agent</span>&quot; &quot;<span class="hljs-variable">$http_x_forwarded_for</span>&quot;&#x27;</span>;

    <span class="hljs-attribute">access_log</span>  /var/log/nginx/access.log  main;

    <span class="hljs-attribute">sendfile</span>        <span class="hljs-literal">on</span>;
    <span class="hljs-comment">#tcp_nopush     on;</span>

    <span class="hljs-attribute">keepalive_timeout</span>  <span class="hljs-number">65</span>;

    <span class="hljs-attribute">gzip</span> <span class="hljs-literal">on</span>;

    <span class="hljs-comment"># include /etc/nginx/conf.d/*.conf;</span>
    <span class="hljs-section">server</span> &#123;
        <span class="hljs-attribute">listen</span> <span class="hljs-number">80</span>;
        <span class="hljs-attribute">server_name</span> _;

        <span class="hljs-comment"># location / &#123;</span>
        <span class="hljs-comment">#     root   /usr/share/nginx/html;</span>
        <span class="hljs-comment">#     index  index.html index.htm;</span>
        <span class="hljs-comment"># &#125;</span>

        <span class="hljs-section">location</span> / &#123;
            <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-For <span class="hljs-variable">$proxy_add_x_forwarded_for</span>;
            <span class="hljs-attribute">proxy_set_header</span> Host <span class="hljs-variable">$http_host</span>;
            <span class="hljs-attribute">proxy_set_header</span> X-Real-IP <span class="hljs-variable">$remote_addr</span>;
            <span class="hljs-attribute">proxy_set_header</span> Range <span class="hljs-variable">$http_range</span>;
            <span class="hljs-attribute">proxy_set_header</span> If-Range <span class="hljs-variable">$http_if_range</span>;
            <span class="hljs-attribute">proxy_redirect</span> <span class="hljs-literal">off</span>;
            <span class="hljs-attribute">proxy_pass</span> http://172.17.0.1:5244/;
            <span class="hljs-comment"># the max size of file to upload</span>
            <span class="hljs-attribute">client_max_body_size</span> <span class="hljs-number">20000m</span>;
        &#125;
    &#125;

&#125;</code></pre><p>åå‘ä»£ç† ws. <a target="_blank" rel="noopener" href="http://nginx.org/en/docs/http/websocket.html">nginx docs</a></p><pre><code class="hljs nginx"><span class="hljs-section">location</span> /chat/ &#123;
    <span class="hljs-attribute">proxy_pass</span> http://backend;
    <span class="hljs-attribute">proxy_http_version</span> <span class="hljs-number">1</span>.<span class="hljs-number">1</span>;
    <span class="hljs-attribute">proxy_set_header</span> Upgrade <span class="hljs-variable">$http_upgrade</span>;
    <span class="hljs-attribute">proxy_set_header</span> Connection <span class="hljs-string">&quot;upgrade&quot;</span>;
&#125;</code></pre><p>è§£å†³ WS åå‘ä»£ç†è¶…æ—¶é—®é¢˜, åœ¨ server å­—æ®µä¸‹æ·»åŠ </p><pre><code class="hljs nginx"><span class="hljs-attribute">proxy_connect_timeout</span> <span class="hljs-number">60s</span>;
<span class="hljs-attribute">proxy_read_timeout</span> <span class="hljs-number">60m</span>;
<span class="hljs-attribute">proxy_send_timeout</span> <span class="hljs-number">60m</span>;</code></pre><p>è‡ªåŠ¨æ·»åŠ  <code>/</code>â€‹ åœ¨ server å­—æ®µä¸‹æ·»åŠ :</p><pre><code class="hljs nginx"><span class="hljs-attribute">server_name_in_redirect</span> <span class="hljs-literal">off</span>;</code></pre><p><strong>å®Œæ•´æ”¯æŒ WS çš„åå‘ä»£ç†æ¨¡æ¿:</strong></p><pre><code class="hljs nginx"><span class="hljs-section">location</span> /note/ &#123;
     <span class="hljs-attribute">proxy_pass</span> http://192.168.8.1:6806/;
     <span class="hljs-attribute">proxy_set_header</span> X-Real-IP <span class="hljs-variable">$remote_addr</span>;
     <span class="hljs-attribute">proxy_set_header</span> x-wiz-real-ip <span class="hljs-variable">$remote_addr</span>;
     <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-For <span class="hljs-variable">$proxy_add_x_forwarded_for</span>;
     <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-Proto <span class="hljs-variable">$scheme</span>;
     <span class="hljs-attribute">proxy_set_header</span> X-NginX-Proxy <span class="hljs-literal">true</span>;

     <span class="hljs-attribute">proxy_http_version</span> <span class="hljs-number">1</span>.<span class="hljs-number">1</span>;
     <span class="hljs-attribute">proxy_set_header</span> Upgrade <span class="hljs-variable">$http_upgrade</span>;
     <span class="hljs-attribute">proxy_set_header</span> Connection <span class="hljs-string">&quot;upgrade&quot;</span>;
     <span class="hljs-attribute">proxy_set_header</span> Connection <span class="hljs-string">&quot;keep-alive&quot;</span>;

     <span class="hljs-attribute">proxy_set_header</span> Host <span class="hljs-variable">$http_host</span>;
     <span class="hljs-attribute">proxy_ssl_session_reuse</span> <span class="hljs-literal">off</span>;
     <span class="hljs-attribute">proxy_cache_bypass</span> <span class="hljs-variable">$http_upgrade</span>;
     <span class="hljs-attribute">proxy_redirect</span> <span class="hljs-literal">off</span>;
 &#125;</code></pre><h3 id="æ·»åŠ è¯ä¹¦"><a href="#æ·»åŠ è¯ä¹¦" class="headerlink" title="æ·»åŠ è¯ä¹¦"></a>æ·»åŠ è¯ä¹¦</h3><h4 id="ä½¿ç”¨-acme-sh-ç”³è¯·è¯ä¹¦"><a href="#ä½¿ç”¨-acme-sh-ç”³è¯·è¯ä¹¦" class="headerlink" title="ä½¿ç”¨ acme.sh ç”³è¯·è¯ä¹¦"></a>ä½¿ç”¨ acme.sh ç”³è¯·è¯ä¹¦</h4><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">é…ç½® Docker ä¸º daemon</span>
docker run -d \
-v /root/acme/:/acme.sh \
-e &quot;CF_Key=e1c57d011aae471eaca549607a2f74154cbe5&quot; \
-e &quot;CF_Email=whalefall9420@outlook.com&quot; \
--restart=always \
--name=acme.sh \
--net=host \
neilpang/acme.sh daemon
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">è¿›å…¥ docker shell</span>
docker exec -it acme.sh sh
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">è®¾ç½®è‡ªåŠ¨æ›´æ–°</span>
docker exec acme.sh --upgrade --auto-upgrade
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">ä½¿ç”¨ letsencrypt ç­¾å‘è¯ä¹¦</span>
docker exec acme.sh --set-default-ca --server letsencrypt --issue --dns dns_cf -d *.whaleluo.top
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">å¯¼å‡º nginx ä½¿ç”¨çš„è¯ä¹¦</span>
docker exec acme.sh --install-cert -d &quot;*.whaleluo.top&quot; --key-file /acme.sh/private.key --fullchain-file /acme.sh/cert.pem
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">å¯¼å‡º uhttpd ä½¿ç”¨çš„è¯ä¹¦</span>
acme.sh --install-cert -d *.whaleluo.top \
--cert-file      /acme.sh/uhttpd.crt  \
--key-file       /acme.sh/uhttpd.key  \
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">å®¹å™¨ä¼šè‡ªåŠ¨æ›´æ–° crantab æ¯å¤©0ç‚¹æ£€æŸ¥è¯ä¹¦ `crontab -l`</span>
/acme.sh # acme.sh --cron --home &quot;/root/.acme.sh&quot; --config-home &quot;/acme.sh&quot;
[Wed Jul 19 02:31:31 UTC 2023] ===Starting cron===
[Wed Jul 19 02:31:31 UTC 2023] Already uptodate!
[Wed Jul 19 02:31:31 UTC 2023] Upgrade success!
[Wed Jul 19 02:31:31 UTC 2023] Auto upgraded to: 3.0.6
[Wed Jul 19 02:31:32 UTC 2023] Renew: &#x27;*.whaleluo.top&#x27;
[Wed Jul 19 02:31:32 UTC 2023] Renew to Le_API=https://acme-v02.api.letsencrypt.org/directory
[Wed Jul 19 02:31:32 UTC 2023] Skip, Next renewal time is: 2023-09-14T17:18:24Z
[Wed Jul 19 02:31:32 UTC 2023] Add &#x27;--force&#x27; to force to renew.
[Wed Jul 19 02:31:32 UTC 2023] Skipped *.whaleluo.top_ecc
[Wed Jul 19 02:31:32 UTC 2023] ===End cron===
</code></pre><h4 id="Nginx-é…ç½®"><a href="#Nginx-é…ç½®" class="headerlink" title="Nginx é…ç½®"></a>Nginx é…ç½®</h4><pre><code class="hljs nginx"><span class="hljs-attribute">user</span>  nginx;
<span class="hljs-attribute">worker_processes</span>  auto;
<span class="hljs-attribute">error_log</span>  /var/log/nginx/<span class="hljs-literal">error</span>.log <span class="hljs-literal">notice</span>;
<span class="hljs-attribute">pid</span>        /var/run/nginx.pid;
<span class="hljs-section">events</span> &#123;
    <span class="hljs-attribute">worker_connections</span>  <span class="hljs-number">1024</span>;
&#125;
<span class="hljs-section">http</span> &#123;
    <span class="hljs-attribute">include</span>       /etc/nginx/mime.types;
    <span class="hljs-attribute">default_type</span>  application/octet-stream;

    <span class="hljs-attribute">log_format</span>  main  <span class="hljs-string">&#x27;<span class="hljs-variable">$remote_addr</span> - <span class="hljs-variable">$remote_user</span> [<span class="hljs-variable">$time_local</span>] &quot;<span class="hljs-variable">$request</span>&quot; &#x27;</span>
                      <span class="hljs-string">&#x27;<span class="hljs-variable">$status</span> <span class="hljs-variable">$body_bytes_sent</span> &quot;<span class="hljs-variable">$http_referer</span>&quot; &#x27;</span>
                      <span class="hljs-string">&#x27;&quot;<span class="hljs-variable">$http_user_agent</span>&quot; &quot;<span class="hljs-variable">$http_x_forwarded_for</span>&quot;&#x27;</span>;

    <span class="hljs-attribute">access_log</span>  /var/log/nginx/access.log  main;
    <span class="hljs-attribute">sendfile</span>        <span class="hljs-literal">on</span>;
    <span class="hljs-attribute">keepalive_timeout</span>  <span class="hljs-number">65</span>;
    <span class="hljs-attribute">gzip</span> <span class="hljs-literal">on</span>;

    <span class="hljs-section">server</span> &#123;
        <span class="hljs-attribute">listen</span> <span class="hljs-number">80</span> ssl http2;
        <span class="hljs-attribute">server_name</span> _;

        <span class="hljs-attribute">ssl</span>                      <span class="hljs-literal">on</span>;
        <span class="hljs-attribute">ssl_certificate</span>     /usr/local/nginx/cert/cert.pem;
        <span class="hljs-attribute">ssl_certificate_key</span>  /usr/local/nginx/cert/private.key;

        <span class="hljs-attribute">ssl_session_timeout</span>  <span class="hljs-number">5m</span>;
        <span class="hljs-attribute">ssl_ciphers</span> ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;
        <span class="hljs-attribute">ssl_protocols</span> TLSv1 TLSv1.<span class="hljs-number">1</span> TLSv1.<span class="hljs-number">2</span>;
        <span class="hljs-attribute">ssl_prefer_server_ciphers</span> <span class="hljs-literal">on</span>;

        <span class="hljs-attribute">error_page</span> <span class="hljs-number">497</span> https://<span class="hljs-variable">$host</span>:8080<span class="hljs-variable">$uris</span>;

        <span class="hljs-attribute">if</span> (<span class="hljs-variable">$scheme</span> = http) &#123;
            <span class="hljs-attribute">return</span> <span class="hljs-number">301</span> https://<span class="hljs-variable">$host</span><span class="hljs-variable">$request_uri</span>;
        &#125;


        <span class="hljs-section">location</span> / &#123;
                <span class="hljs-attribute">root</span>   /usr/share/nginx/html;
                <span class="hljs-attribute">index</span>  index.html index.htm;
        &#125;

    &#125;
&#125;</code></pre><h3 id="è·¨åŸŸ"><a href="#è·¨åŸŸ" class="headerlink" title="è·¨åŸŸ"></a>è·¨åŸŸ</h3><pre><code class="hljs nginx"><span class="hljs-attribute">add_header</span> Access-Control-Allow-Origin *;
<span class="hljs-attribute">add_header</span> Access-Control-Allow-Methods GET,POST,OPTIONS;
<span class="hljs-attribute">add_header</span> Access-Control-Allow-Headers Content-Type,Authorization;</code></pre><h3 id="è‡ªç”¨å®Œæ•´çš„-nginx-conf"><a href="#è‡ªç”¨å®Œæ•´çš„-nginx-conf" class="headerlink" title="è‡ªç”¨å®Œæ•´çš„ nginx.conf"></a>è‡ªç”¨å®Œæ•´çš„ nginx.conf</h3><p>nginx file format: <a target="_blank" rel="noopener" href="https://nginxbeautifier.github.io/" title="åœ¨çº¿æ•´ç† nginx é…ç½®æ–‡ä»¶">https://nginxbeautifier.github.io/</a></p><p>github repo: <a target="_blank" rel="noopener" href="https://github.com/nginxbeautifier/nginxbeautifier.github.io">https://github.com/nginxbeautifier/nginxbeautifier.github.io</a></p><pre><code class="hljs nginx"><span class="hljs-attribute">user</span> nginx;
<span class="hljs-attribute">worker_processes</span> auto;
<span class="hljs-attribute">error_log</span> /var/log/nginx/<span class="hljs-literal">error</span>.log <span class="hljs-literal">notice</span>;
<span class="hljs-attribute">pid</span> /var/run/nginx.pid;
<span class="hljs-section">events</span> &#123;

 <span class="hljs-attribute">worker_connections</span> <span class="hljs-number">1024</span>;
&#125;
<span class="hljs-section">http</span> &#123;

 <span class="hljs-attribute">include</span> /etc/nginx/mime.types;
 <span class="hljs-attribute">default_type</span> application/octet-stream;

 <span class="hljs-attribute">log_format</span> main <span class="hljs-string">&#x27;<span class="hljs-variable">$remote_addr</span> - <span class="hljs-variable">$remote_user</span> [<span class="hljs-variable">$time_local</span>] &quot;<span class="hljs-variable">$request</span>&quot; &#x27;</span>
 <span class="hljs-string">&#x27;<span class="hljs-variable">$status</span> <span class="hljs-variable">$body_bytes_sent</span> &quot;<span class="hljs-variable">$http_referer</span>&quot; &#x27;</span>
 <span class="hljs-string">&#x27;&quot;<span class="hljs-variable">$http_user_agent</span>&quot; &quot;<span class="hljs-variable">$http_x_forwarded_for</span>&quot;&#x27;</span>;

 <span class="hljs-attribute">access_log</span> /var/log/nginx/access.log main;
 <span class="hljs-attribute">sendfile</span> <span class="hljs-literal">on</span>;
 <span class="hljs-attribute">keepalive_timeout</span> <span class="hljs-number">65</span>;
 <span class="hljs-attribute">gzip</span> <span class="hljs-literal">on</span>;

 <span class="hljs-section">server</span> &#123;

  <span class="hljs-attribute">listen</span> <span class="hljs-number">8080</span> ssl http2;
  <span class="hljs-attribute">server_name</span> _;

  <span class="hljs-comment"># ssl off;</span>
  <span class="hljs-attribute">ssl_certificate</span> /usr/local/nginx/cert/cert.pem;
  <span class="hljs-attribute">ssl_certificate_key</span> /usr/local/nginx/cert/private.key;

  <span class="hljs-attribute">ssl_session_timeout</span> <span class="hljs-number">5m</span>;
  <span class="hljs-attribute">ssl_ciphers</span> ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;
  <span class="hljs-attribute">ssl_protocols</span> TLSv1 TLSv1.<span class="hljs-number">1</span> TLSv1.<span class="hljs-number">2</span>;
  <span class="hljs-attribute">ssl_prefer_server_ciphers</span> <span class="hljs-literal">on</span>;

  <span class="hljs-attribute">error_page</span> <span class="hljs-number">497</span> https://<span class="hljs-variable">$host</span>:8080<span class="hljs-variable">$request_uri</span>;

  <span class="hljs-attribute">client_max_body_size</span> <span class="hljs-number">5G</span>;
  <span class="hljs-attribute">client_header_timeout</span> <span class="hljs-number">1m</span>;
  <span class="hljs-attribute">client_body_timeout</span> <span class="hljs-number">1m</span>;
  <span class="hljs-attribute">proxy_connect_timeout</span> <span class="hljs-number">60s</span>;
  <span class="hljs-attribute">proxy_read_timeout</span> <span class="hljs-number">60m</span>;
  <span class="hljs-attribute">proxy_send_timeout</span> <span class="hljs-number">60m</span>;


  <span class="hljs-section">location</span> / &#123;

   <span class="hljs-attribute">alias</span> /usr/share/nginx/html;
   <span class="hljs-attribute">index</span> index.html;
  &#125;


  <span class="hljs-section">location</span> /sdr/ &#123;

   <span class="hljs-attribute">proxy_pass</span> http://192.168.8.1:8073/;
   <span class="hljs-attribute">proxy_set_header</span> X-Real-IP <span class="hljs-variable">$remote_addr</span>;
   <span class="hljs-attribute">proxy_set_header</span> x-wiz-real-ip <span class="hljs-variable">$remote_addr</span>;
   <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-For <span class="hljs-variable">$proxy_add_x_forwarded_for</span>;
   <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-Proto <span class="hljs-variable">$scheme</span>;
   <span class="hljs-attribute">proxy_set_header</span> X-NginX-Proxy <span class="hljs-literal">true</span>;

   <span class="hljs-attribute">proxy_http_version</span> <span class="hljs-number">1</span>.<span class="hljs-number">1</span>;
   <span class="hljs-attribute">proxy_set_header</span> Upgrade <span class="hljs-variable">$http_upgrade</span>;
   <span class="hljs-attribute">proxy_set_header</span> Connection <span class="hljs-string">&quot;upgrade&quot;</span>;
   <span class="hljs-attribute">proxy_set_header</span> Connection <span class="hljs-string">&quot;keep-alive&quot;</span>;

   <span class="hljs-attribute">proxy_set_header</span> Host <span class="hljs-variable">$http_host</span>;
   <span class="hljs-attribute">proxy_ssl_session_reuse</span> <span class="hljs-literal">off</span>;
   <span class="hljs-attribute">proxy_cache_bypass</span> <span class="hljs-variable">$http_upgrade</span>;
   <span class="hljs-attribute">proxy_redirect</span> <span class="hljs-literal">off</span>;
  &#125;

  <span class="hljs-section">location</span> /wss/ &#123;

   <span class="hljs-attribute">proxy_pass</span> http://192.168.8.1:10000/wss/;
   <span class="hljs-attribute">proxy_set_header</span> X-Real-IP <span class="hljs-variable">$remote_addr</span>;
   <span class="hljs-attribute">proxy_set_header</span> x-wiz-real-ip <span class="hljs-variable">$remote_addr</span>;
   <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-For <span class="hljs-variable">$proxy_add_x_forwarded_for</span>;
   <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-Proto <span class="hljs-variable">$scheme</span>;
   <span class="hljs-attribute">proxy_set_header</span> X-NginX-Proxy <span class="hljs-literal">true</span>;

   <span class="hljs-attribute">proxy_http_version</span> <span class="hljs-number">1</span>.<span class="hljs-number">1</span>;
   <span class="hljs-attribute">proxy_set_header</span> Upgrade <span class="hljs-variable">$http_upgrade</span>;
   <span class="hljs-attribute">proxy_set_header</span> Connection <span class="hljs-string">&quot;upgrade&quot;</span>;
   <span class="hljs-attribute">proxy_set_header</span> Connection <span class="hljs-string">&quot;keep-alive&quot;</span>;

   <span class="hljs-attribute">proxy_set_header</span> Host <span class="hljs-variable">$http_host</span>;
   <span class="hljs-attribute">proxy_ssl_session_reuse</span> <span class="hljs-literal">off</span>;
   <span class="hljs-attribute">proxy_cache_bypass</span> <span class="hljs-variable">$http_upgrade</span>;
   <span class="hljs-attribute">proxy_redirect</span> <span class="hljs-literal">off</span>;
  &#125;

  <span class="hljs-section">location</span> /dav/ &#123;

   <span class="hljs-attribute">proxy_pass</span> http://192.168.8.1:5244/dav/;
   <span class="hljs-attribute">proxy_set_header</span> X-Real-IP <span class="hljs-variable">$remote_addr</span>;
   <span class="hljs-attribute">proxy_set_header</span> x-wiz-real-ip <span class="hljs-variable">$remote_addr</span>;
   <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-For <span class="hljs-variable">$proxy_add_x_forwarded_for</span>;
   <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-Proto <span class="hljs-variable">$scheme</span>;
   <span class="hljs-attribute">proxy_set_header</span> X-NginX-Proxy <span class="hljs-literal">true</span>;

   <span class="hljs-attribute">proxy_http_version</span> <span class="hljs-number">1</span>.<span class="hljs-number">1</span>;
   <span class="hljs-attribute">proxy_set_header</span> Upgrade <span class="hljs-variable">$http_upgrade</span>;
   <span class="hljs-attribute">proxy_set_header</span> Connection <span class="hljs-string">&quot;upgrade&quot;</span>;
   <span class="hljs-attribute">proxy_set_header</span> Connection <span class="hljs-string">&quot;keep-alive&quot;</span>;

   <span class="hljs-attribute">proxy_set_header</span> Host <span class="hljs-variable">$http_host</span>;
   <span class="hljs-attribute">proxy_ssl_session_reuse</span> <span class="hljs-literal">off</span>;
   <span class="hljs-attribute">proxy_cache_bypass</span> <span class="hljs-variable">$http_upgrade</span>;
   <span class="hljs-attribute">proxy_redirect</span> <span class="hljs-literal">off</span>;
  &#125;

  <span class="hljs-section">location</span> /test/ &#123;

   <span class="hljs-attribute">proxy_pass</span> http://192.168.8.1:3300/;
   <span class="hljs-attribute">proxy_set_header</span> X-Real-IP <span class="hljs-variable">$remote_addr</span>;
   <span class="hljs-attribute">proxy_set_header</span> x-wiz-real-ip <span class="hljs-variable">$remote_addr</span>;
   <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-For <span class="hljs-variable">$proxy_add_x_forwarded_for</span>;
   <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-Proto <span class="hljs-variable">$scheme</span>;
   <span class="hljs-attribute">proxy_set_header</span> X-NginX-Proxy <span class="hljs-literal">true</span>;

   <span class="hljs-attribute">proxy_http_version</span> <span class="hljs-number">1</span>.<span class="hljs-number">1</span>;
   <span class="hljs-attribute">proxy_set_header</span> Upgrade <span class="hljs-variable">$http_upgrade</span>;
   <span class="hljs-attribute">proxy_set_header</span> Connection <span class="hljs-string">&quot;upgrade&quot;</span>;
   <span class="hljs-attribute">proxy_set_header</span> Connection <span class="hljs-string">&quot;keep-alive&quot;</span>;

   <span class="hljs-attribute">proxy_set_header</span> Host <span class="hljs-variable">$http_host</span>;
   <span class="hljs-attribute">proxy_ssl_session_reuse</span> <span class="hljs-literal">off</span>;
   <span class="hljs-attribute">proxy_cache_bypass</span> <span class="hljs-variable">$http_upgrade</span>;
   <span class="hljs-attribute">proxy_redirect</span> <span class="hljs-literal">off</span>;
  &#125;
 &#125;
&#125;</code></pre><h2 id="OpenWRT"><a href="#OpenWRT" class="headerlink" title="OpenWRT"></a>OpenWRT</h2><p>x86 å®˜æ–¹æº</p><pre><code class="hljs shell">src/gz openwrt_core http://downloads.openwrt.org/releases/21.02.0/targets/x86/64/packages
src/gz openwrt_base https://downloads.openwrt.org/snapshots/packages/x86_64/base
src/gz openwrt_luciÂ  Â  https://downloads.openwrt.org/snapshots/packages/x86_64/luci
src/gz openwrt_packages https://downloads.openwrt.org/snapshots/packages/x86_64/packages
src/gz openwrt_routing https://mirrors.cloud.tencent.com/lede/snapshots/packages/x86_64/routing
src/gz openwrt_telephony https://mirrors.cloud.tencent.com/lede/snapshots/packages/x86_64/telephony</code></pre><h2 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h2><h3 id="Update-latest-Python-version-æ›´æ–°-Python-ç‰ˆæœ¬"><a href="#Update-latest-Python-version-æ›´æ–°-Python-ç‰ˆæœ¬" class="headerlink" title="Update latest Python version æ›´æ–° Python ç‰ˆæœ¬"></a>Update latest Python version æ›´æ–° Python ç‰ˆæœ¬</h3><p><a target="_blank" rel="noopener" href="https://cloudbytes.dev/snippets/upgrade-python-to-latest-version-on-ubuntu-linux">Upgrade Python to latest version (3.12) on Ubuntu Linux or WSL2</a></p><h2 id="Network-Tools"><a href="#Network-Tools" class="headerlink" title="Network Tools"></a>Network Tools</h2><ol><li><p>WebShell æŸ¥æ€å·¥å…·:<a target="_blank" rel="noopener" href="https://www.shellpub.com/">SHELLPUB.COM ä¸“æ³¨æŸ¥æ€,æ°¸ä¹…å…è´¹</a></p></li><li><p>IP çº¯å‡€åº¦æŸ¥è¯¢ IP Fraud Check</p><ul><li><a target="_blank" rel="noopener" href="https://scamalytics.com/">https://scamalytics.com/</a></li><li><a target="_blank" rel="noopener" href="https://ping0.cc/">https://ping0.cc/</a></li><li><a target="_blank" rel="noopener" href="https://ipdata.co/">https://ipdata.co/</a></li></ul></li></ol><h2 id="Windowns-å®ç”¨å‘½ä»¤"><a href="#Windowns-å®ç”¨å‘½ä»¤" class="headerlink" title="Windowns å®ç”¨å‘½ä»¤"></a>Windowns å®ç”¨å‘½ä»¤</h2><h3 id="Restart-Windows-Explorer"><a href="#Restart-Windows-Explorer" class="headerlink" title="Restart Windows Explorer"></a>Restart Windows Explorer</h3><p>restart-explorer.cmd</p><pre><code class="hljs shell">taskkill /im explorer.exe /f
cd /d %userprofile%\appdata\local
del iconcache.db /a
start explorer.exe
exit</code></pre><h3 id="Clear-Event-Viewer-Logs-bat"><a href="#Clear-Event-Viewer-Logs-bat" class="headerlink" title="Clear_Event_Viewer_Logs.bat"></a>Clear_Event_Viewer_Logs.bat</h3><p>æ¸…é™¤ Windows äº‹ä»¶æŸ¥çœ‹å™¨æ—¥å¿—</p><pre><code class="hljs shell">@echo off

FOR /F &quot;tokens=1,2*&quot; %%V IN (&#x27;bcdedit&#x27;) DO SET adminTest=%%V
IF (%adminTest%)==(Access) goto noAdmin
for /F &quot;tokens=*&quot; %%G in (&#x27;wevtutil.exe el&#x27;) DO (call :do_clear &quot;%%G&quot;)
echo.
echo All Event Logs have been cleared!
goto theEnd

:do_clear
echo clearing %1
wevtutil.exe cl %1
goto :eof

:noAdmin
echo Current user permissions to execute this .BAT file are inadequate.
echo This .BAT file must be run with administrative privileges.
echo Exit now, right click on this .BAT file, and select &quot;Run as administrator&quot;.
pause &gt;nul

:theEnd
Exit</code></pre><h3 id="delete-history-cmd"><a href="#delete-history-cmd" class="headerlink" title="delete-history.cmd"></a>delete-history.cmd</h3><p>æ¸…é™¤ Windows å†å²è®°å½•</p><pre><code class="hljs shell">@echo off
del /F /Q %APPDATA%\Microsoft\Windows\Recent\AutomaticDestinations\*
del /F /Q %APPDATA%\Microsoft\Windows\Recent\CustomDestinations\*
del /F /Q %APPDATA%\Microsoft\Windows\Recent\*
taskkill /f /im explorer.exe
start explorer.exe</code></pre><h2 id="å¼•ç”¨-Reference"><a href="#å¼•ç”¨-Reference" class="headerlink" title="å¼•ç”¨ Reference"></a>å¼•ç”¨ Reference</h2><blockquote><p>æ„Ÿè°¢ä»¥ä¸‹åšå®¢çš„ä½œè€…å’Œæ•™ç¨‹ç½‘ç«™,å¦‚æœ‰ä¾µæƒè¯·åŠæ—¶è”ç³»åšä¸»åˆ é™¤.</p></blockquote><ol><li>Golang å’Œ Linux å­¦ä¹ ç¬”è®°åˆé›† <a target="_blank" rel="noopener" href="https://www.huweihuang.com/">https://www.huweihuang.com/</a></li></ol><p>â€</p></div><div class="post__license"><p><strong>Author: </strong>WhaleFall</p><p><strong>Permalink: </strong><a href="https://www.whaleluo.top/linux-note/">https://www.whaleluo.top/linux-note/</a></p><strong><p>æ–‡ç« é»˜è®¤ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">CC BY-NC-SA 4.0</a> åè®®è¿›è¡Œè®¸å¯ï¼Œä½¿ç”¨æ—¶è¯·æ³¨æ„éµå®ˆåè®®ã€‚</p></strong></div><div class="post-footer__meta"><p>updated at 2022-03-20</p></div><div class="post-entry__tags"><a href="/tags/Linux/" class="post-tags__link button"># Linux</a></div></article><div class="nav"><div class="nav__prev"><a href="/server-all/" class="nav__link"><div><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M589.088 790.624L310.464 512l278.624-278.624 45.248 45.248L400.96 512l233.376 233.376z" fill="#808080"></path></svg></div><div><div class="nav__label">Previous Post</div><div class="nav__title">æœåŠ¡å™¨å¤‡å¿˜å½•âœ¨</div></div></a></div><div class="nav__next"><a href="/wky-help/" class="nav__link"><div><div class="nav__label">Next Post</div><div class="nav__title">ç©å®¢äº‘æŠ˜è…¾æ—¥å¿—</div></div><div><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M434.944 790.624l-45.248-45.248L623.04 512l-233.376-233.376 45.248-45.248L713.568 512z" fill="#808080"></path></svg></div></a></div></div><div class="post__comments post__with-toc content-card" id="comment"><h4>Comments</h4><div id="gitalk-container"></div></div></main><footer class="footer"><a href="#" class="button" id="b2t" aria-label="Back to Top" title="Back to Top"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" width="32" height="32"><path d="M233.376 722.752L278.624 768 512 534.624 745.376 768l45.248-45.248L512 444.128zM192 352h640V288H192z" fill="currentColor"></path></svg> </a><span id="busuanzi_container_site_uv" hidden><span></span> <span id="busuanzi_value_site_uv"></span> <span>Viewers</span> <span>|</span> </span><span id="busuanzi_container_site_pv" hidden><span></span> <span id="busuanzi_value_site_pv"></span> <span>Views</span></span><p class="footer-copyright">Copyright Â© 2018&nbsp;-&nbsp;2024 <a href="/">ğŸ˜Šè½è½ã®BlogğŸ˜Š</a></p><p>Powered by <a href="https://hexo.io" target="_blank">Hexo</a> | Theme - <a href="https://github.com/ChrAlpha/hexo-theme-cards" target="_blank">Cards</a></p></footer></div><script defer src="https://api.whaleluo.top/file/?url=https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.1.0/dist/lazyload.min.js"></script><script>window.lazyLoadOptions={elements_selector:".lazy",threshold:0}</script><script defer src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon='{"token": "e052e3fc47004feab6ae8122cfeec660"}'></script><script src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js"></script><link rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css"><script src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js"></script><script>let lazyloadT = Boolean('true'),
            auto_fancybox = Boolean('true')
        if (auto_fancybox) {
            $(".post__content").find('img').each(function () {
                var element = document.createElement("a");
                $(element).attr("data-fancybox", "gallery");
                $(element).attr("href", $(this).attr("src"));
                if (lazyloadT) {
                    $(element).attr("href", $(this).attr("data-srcset"));
                }
                $(this).wrap(element);
            });
        } else {
            $(".post__content").find("fancybox").find('img').each(function () {
                var element = document.createElement("a");
                $(element).attr("data-fancybox", "gallery");
                $(element).attr("href", $(this).attr("src"));
                if (lazyloadT) {
                    $(element).attr("href", $(this).attr("data-srcset"));
                }
                $(this).wrap(element);
            });
        }</script><script>function loadComment() {
            let e, i;
            (e = document.createElement("script")).src = 'https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js',
            document.body.appendChild(e);
            e.onload = () => {
                var gitalk = new Gitalk({
                    clientID: 'b2fd920dada050fed5b3',
                    clientSecret: '5c847cefe7df2df634886eafa178877899404378',
                    repo: 'WhaleFell.github.io',
                    owner: 'WhaleFell',
                    admin: 'WhaleFell',
                    id: window.location.pathname,
                    distractionFreeMode: false
                });
                gitalk.render('gitalk-container');
            };
            (i = document.createElement("link")).rel = "stylesheet",
            i.href = 'https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css',
            document.head.appendChild(i);
        }
    
        var runningOnBrowser = typeof window !== "undefined";
        var isBot = runningOnBrowser && !("onscroll" in window) || typeof navigator !== "undefined" && /(gle|ing|ro|msn)bot|crawl|spider|yand|duckgo/i.test(navigator.userAgent);
        var supportsIntersectionObserver = runningOnBrowser && "IntersectionObserver" in window;
    
        setTimeout(function () {
            if (!isBot && supportsIntersectionObserver) {
                var comment_observer = new IntersectionObserver(function(entries) {
                    if (entries[0].isIntersecting) {
                        loadComment();
                        comment_observer.disconnect();
                    }
                }, { threshold: [0] });
                comment_observer.observe(document.getElementById('comment'));
            } else {
                loadComment();
            }
        }, 1);</script></body></html>